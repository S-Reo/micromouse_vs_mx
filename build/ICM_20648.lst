ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ICM_20648.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.compare_num,"ax",%progbits
  20              		.align	1
  21              		.global	compare_num
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	compare_num:
  27              	.LVL0:
  28              	.LFB240:
  29              		.file 1 "Core/Src/HardWare/ICM_20648.c"
   1:Core/Src/HardWare/ICM_20648.c **** /*
   2:Core/Src/HardWare/ICM_20648.c ****  * ICM_20648.c
   3:Core/Src/HardWare/ICM_20648.c ****  *
   4:Core/Src/HardWare/ICM_20648.c ****  *  Created on: Jul 28, 2021
   5:Core/Src/HardWare/ICM_20648.c ****  *      Author: leopi
   6:Core/Src/HardWare/ICM_20648.c ****  */
   7:Core/Src/HardWare/ICM_20648.c **** //ICM_20648.c Ver.1.0
   8:Core/Src/HardWare/ICM_20648.c **** #include "ICM_20648.h"
   9:Core/Src/HardWare/ICM_20648.c **** #include <stdio.h>
  10:Core/Src/HardWare/ICM_20648.c **** #include <math.h>
  11:Core/Src/HardWare/ICM_20648.c **** #include <stdlib.h>
  12:Core/Src/HardWare/ICM_20648.c **** volatile int16_t	xa, ya, za; // 加速度(16bitデータ)
  13:Core/Src/HardWare/ICM_20648.c **** volatile int16_t xg, yg, zg;	// 角加速度(16bitデータ)
  14:Core/Src/HardWare/ICM_20648.c **** float zg_offset=0, ya_offset=0;
  15:Core/Src/HardWare/ICM_20648.c **** volatile float  ZGyro=0, YAccel=0;
  16:Core/Src/HardWare/ICM_20648.c **** int16_t ZGFilterd;
  17:Core/Src/HardWare/ICM_20648.c **** 
  18:Core/Src/HardWare/ICM_20648.c **** const float convert_to_imu_angv = M_PI/(16.4f*180.0f);
  19:Core/Src/HardWare/ICM_20648.c **** 
  20:Core/Src/HardWare/ICM_20648.c **** inline uint8_t read_byte( uint8_t reg ) {
  21:Core/Src/HardWare/ICM_20648.c **** 
  22:Core/Src/HardWare/ICM_20648.c **** 	uint8_t ret,val;
  23:Core/Src/HardWare/ICM_20648.c **** 
  24:Core/Src/HardWare/ICM_20648.c **** 	ret = reg | 0x80;
  25:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
  27:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
  28:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
  29:Core/Src/HardWare/ICM_20648.c **** 	return val;
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 2


  30:Core/Src/HardWare/ICM_20648.c **** }
  31:Core/Src/HardWare/ICM_20648.c **** inline float ReadIMU(uint8_t a, uint8_t b) {
  32:Core/Src/HardWare/ICM_20648.c **** 
  33:Core/Src/HardWare/ICM_20648.c **** 	uint8_t ret1, ret2,val1,val2;
  34:Core/Src/HardWare/ICM_20648.c **** 	uint8_t ret[2] = {
  35:Core/Src/HardWare/ICM_20648.c **** 			a,//0x37,
  36:Core/Src/HardWare/ICM_20648.c **** 			b//0x38,
  37:Core/Src/HardWare/ICM_20648.c **** 	};
  38:Core/Src/HardWare/ICM_20648.c **** 	int16_t law_data;
  39:Core/Src/HardWare/ICM_20648.c **** 	float res;
  40:Core/Src/HardWare/ICM_20648.c **** 	ret1 = ret[0] | 0x80;
  41:Core/Src/HardWare/ICM_20648.c **** 	ret2 = ret[1] | 0x80;
  42:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
  43:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret1,1,100);
  44:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val1,1,100);
  45:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
  46:Core/Src/HardWare/ICM_20648.c **** 
  47:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
  48:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret2,1,100);
  49:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val2,1,100);
  50:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
  51:Core/Src/HardWare/ICM_20648.c **** 	law_data = ( ((uint16_t)val1 << 8) | ((uint16_t)val2) );
  52:Core/Src/HardWare/ICM_20648.c **** 	res = (float)law_data;
  53:Core/Src/HardWare/ICM_20648.c **** 	return res;
  54:Core/Src/HardWare/ICM_20648.c **** }
  55:Core/Src/HardWare/ICM_20648.c **** 
  56:Core/Src/HardWare/ICM_20648.c **** 
  57:Core/Src/HardWare/ICM_20648.c **** int compare_num(const void * n1, const void * n2)
  58:Core/Src/HardWare/ICM_20648.c **** {
  30              		.loc 1 58 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  59:Core/Src/HardWare/ICM_20648.c **** 	if (*(int16_t *)n1 > *(int16_t *)n2)
  35              		.loc 1 59 2 view .LVU1
  36              		.loc 1 59 6 is_stmt 0 view .LVU2
  37 0000 B0F90020 		ldrsh	r2, [r0]
  38              		.loc 1 59 23 view .LVU3
  39 0004 B1F90030 		ldrsh	r3, [r1]
  40              		.loc 1 59 5 view .LVU4
  41 0008 9A42     		cmp	r2, r3
  42 000a 03DC     		bgt	.L3
  60:Core/Src/HardWare/ICM_20648.c **** 	{
  61:Core/Src/HardWare/ICM_20648.c **** 		return 1;
  62:Core/Src/HardWare/ICM_20648.c **** 	}
  63:Core/Src/HardWare/ICM_20648.c **** 	else if (*(int16_t *)n1 < *(int16_t *)n2)
  43              		.loc 1 63 7 is_stmt 1 view .LVU5
  44              		.loc 1 63 10 is_stmt 0 view .LVU6
  45 000c 04DA     		bge	.L4
  64:Core/Src/HardWare/ICM_20648.c **** 	{
  65:Core/Src/HardWare/ICM_20648.c **** 		return -1;
  46              		.loc 1 65 10 view .LVU7
  47 000e 4FF0FF30 		mov	r0, #-1
  48              	.LVL1:
  49              		.loc 1 65 10 view .LVU8
  50 0012 7047     		bx	lr
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 3


  51              	.LVL2:
  52              	.L3:
  61:Core/Src/HardWare/ICM_20648.c **** 	}
  53              		.loc 1 61 10 view .LVU9
  54 0014 0120     		movs	r0, #1
  55              	.LVL3:
  61:Core/Src/HardWare/ICM_20648.c **** 	}
  56              		.loc 1 61 10 view .LVU10
  57 0016 7047     		bx	lr
  58              	.LVL4:
  59              	.L4:
  66:Core/Src/HardWare/ICM_20648.c **** 	}
  67:Core/Src/HardWare/ICM_20648.c **** 	else
  68:Core/Src/HardWare/ICM_20648.c **** 	{
  69:Core/Src/HardWare/ICM_20648.c **** 		return 0;
  60              		.loc 1 69 10 view .LVU11
  61 0018 0020     		movs	r0, #0
  62              	.LVL5:
  70:Core/Src/HardWare/ICM_20648.c **** 	}
  71:Core/Src/HardWare/ICM_20648.c **** }
  63              		.loc 1 71 1 view .LVU12
  64 001a 7047     		bx	lr
  65              		.cfi_endproc
  66              	.LFE240:
  68              		.section	.text.read_byte,"ax",%progbits
  69              		.align	1
  70              		.global	read_byte
  71              		.syntax unified
  72              		.thumb
  73              		.thumb_func
  75              	read_byte:
  76              	.LVL6:
  77              	.LFB238:
  20:Core/Src/HardWare/ICM_20648.c **** 
  78              		.loc 1 20 41 is_stmt 1 view -0
  79              		.cfi_startproc
  80              		@ args = 0, pretend = 0, frame = 8
  81              		@ frame_needed = 0, uses_anonymous_args = 0
  20:Core/Src/HardWare/ICM_20648.c **** 
  82              		.loc 1 20 41 is_stmt 0 view .LVU14
  83 0000 30B5     		push	{r4, r5, lr}
  84              	.LCFI0:
  85              		.cfi_def_cfa_offset 12
  86              		.cfi_offset 4, -12
  87              		.cfi_offset 5, -8
  88              		.cfi_offset 14, -4
  89 0002 83B0     		sub	sp, sp, #12
  90              	.LCFI1:
  91              		.cfi_def_cfa_offset 24
  22:Core/Src/HardWare/ICM_20648.c **** 
  92              		.loc 1 22 2 is_stmt 1 view .LVU15
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
  93              		.loc 1 24 2 view .LVU16
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
  94              		.loc 1 24 6 is_stmt 0 view .LVU17
  95 0004 60F07F00 		orn	r0, r0, #127
  96              	.LVL7:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 4


  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
  97              		.loc 1 24 6 view .LVU18
  98 0008 8DF80700 		strb	r0, [sp, #7]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
  99              		.loc 1 25 2 is_stmt 1 view .LVU19
 100 000c 0E4C     		ldr	r4, .L7
 101 000e 0022     		movs	r2, #0
 102 0010 0421     		movs	r1, #4
 103 0012 2046     		mov	r0, r4
 104 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 105              	.LVL8:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 106              		.loc 1 26 2 view .LVU20
 107 0018 0C4D     		ldr	r5, .L7+4
 108 001a 6423     		movs	r3, #100
 109 001c 0122     		movs	r2, #1
 110 001e 0DF10701 		add	r1, sp, #7
 111 0022 2846     		mov	r0, r5
 112 0024 FFF7FEFF 		bl	HAL_SPI_Transmit
 113              	.LVL9:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 114              		.loc 1 27 2 view .LVU21
 115 0028 6423     		movs	r3, #100
 116 002a 0122     		movs	r2, #1
 117 002c 0DF10601 		add	r1, sp, #6
 118 0030 2846     		mov	r0, r5
 119 0032 FFF7FEFF 		bl	HAL_SPI_Receive
 120              	.LVL10:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 121              		.loc 1 28 2 view .LVU22
 122 0036 0122     		movs	r2, #1
 123 0038 0421     		movs	r1, #4
 124 003a 2046     		mov	r0, r4
 125 003c FFF7FEFF 		bl	HAL_GPIO_WritePin
 126              	.LVL11:
  29:Core/Src/HardWare/ICM_20648.c **** }
 127              		.loc 1 29 2 view .LVU23
  30:Core/Src/HardWare/ICM_20648.c **** inline float ReadIMU(uint8_t a, uint8_t b) {
 128              		.loc 1 30 1 is_stmt 0 view .LVU24
 129 0040 9DF80600 		ldrb	r0, [sp, #6]	@ zero_extendqisi2
 130 0044 03B0     		add	sp, sp, #12
 131              	.LCFI2:
 132              		.cfi_def_cfa_offset 12
 133              		@ sp needed
 134 0046 30BD     		pop	{r4, r5, pc}
 135              	.L8:
 136              		.align	2
 137              	.L7:
 138 0048 000C0240 		.word	1073875968
 139 004c 00000000 		.word	hspi3
 140              		.cfi_endproc
 141              	.LFE238:
 143              		.section	.text.ReadIMU,"ax",%progbits
 144              		.align	1
 145              		.global	ReadIMU
 146              		.syntax unified
 147              		.thumb
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 5


 148              		.thumb_func
 150              	ReadIMU:
 151              	.LVL12:
 152              	.LFB239:
  31:Core/Src/HardWare/ICM_20648.c **** 
 153              		.loc 1 31 44 is_stmt 1 view -0
 154              		.cfi_startproc
 155              		@ args = 0, pretend = 0, frame = 8
 156              		@ frame_needed = 0, uses_anonymous_args = 0
  31:Core/Src/HardWare/ICM_20648.c **** 
 157              		.loc 1 31 44 is_stmt 0 view .LVU26
 158 0000 30B5     		push	{r4, r5, lr}
 159              	.LCFI3:
 160              		.cfi_def_cfa_offset 12
 161              		.cfi_offset 4, -12
 162              		.cfi_offset 5, -8
 163              		.cfi_offset 14, -4
 164 0002 83B0     		sub	sp, sp, #12
 165              	.LCFI4:
 166              		.cfi_def_cfa_offset 24
  33:Core/Src/HardWare/ICM_20648.c **** 	uint8_t ret[2] = {
 167              		.loc 1 33 2 is_stmt 1 view .LVU27
  34:Core/Src/HardWare/ICM_20648.c **** 			a,//0x37,
 168              		.loc 1 34 2 view .LVU28
  34:Core/Src/HardWare/ICM_20648.c **** 			a,//0x37,
 169              		.loc 1 34 10 is_stmt 0 view .LVU29
 170 0004 8DF80000 		strb	r0, [sp]
 171 0008 8DF80110 		strb	r1, [sp, #1]
  38:Core/Src/HardWare/ICM_20648.c **** 	float res;
 172              		.loc 1 38 2 is_stmt 1 view .LVU30
  39:Core/Src/HardWare/ICM_20648.c **** 	ret1 = ret[0] | 0x80;
 173              		.loc 1 39 2 view .LVU31
  40:Core/Src/HardWare/ICM_20648.c **** 	ret2 = ret[1] | 0x80;
 174              		.loc 1 40 2 view .LVU32
  40:Core/Src/HardWare/ICM_20648.c **** 	ret2 = ret[1] | 0x80;
 175              		.loc 1 40 7 is_stmt 0 view .LVU33
 176 000c 60F07F00 		orn	r0, r0, #127
 177              	.LVL13:
  40:Core/Src/HardWare/ICM_20648.c **** 	ret2 = ret[1] | 0x80;
 178              		.loc 1 40 7 view .LVU34
 179 0010 8DF80700 		strb	r0, [sp, #7]
  41:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 180              		.loc 1 41 2 is_stmt 1 view .LVU35
  41:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 181              		.loc 1 41 7 is_stmt 0 view .LVU36
 182 0014 61F07F01 		orn	r1, r1, #127
 183              	.LVL14:
  41:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 184              		.loc 1 41 7 view .LVU37
 185 0018 8DF80610 		strb	r1, [sp, #6]
  42:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret1,1,100);
 186              		.loc 1 42 2 is_stmt 1 view .LVU38
 187 001c 1E4C     		ldr	r4, .L11
 188 001e 0022     		movs	r2, #0
 189 0020 0421     		movs	r1, #4
 190 0022 2046     		mov	r0, r4
 191 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 6


 192              	.LVL15:
  43:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val1,1,100);
 193              		.loc 1 43 2 view .LVU39
 194 0028 1C4D     		ldr	r5, .L11+4
 195 002a 6423     		movs	r3, #100
 196 002c 0122     		movs	r2, #1
 197 002e 0DF10701 		add	r1, sp, #7
 198 0032 2846     		mov	r0, r5
 199 0034 FFF7FEFF 		bl	HAL_SPI_Transmit
 200              	.LVL16:
  44:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 201              		.loc 1 44 2 view .LVU40
 202 0038 6423     		movs	r3, #100
 203 003a 0122     		movs	r2, #1
 204 003c 0DF10501 		add	r1, sp, #5
 205 0040 2846     		mov	r0, r5
 206 0042 FFF7FEFF 		bl	HAL_SPI_Receive
 207              	.LVL17:
  45:Core/Src/HardWare/ICM_20648.c **** 
 208              		.loc 1 45 2 view .LVU41
 209 0046 0122     		movs	r2, #1
 210 0048 0421     		movs	r1, #4
 211 004a 2046     		mov	r0, r4
 212 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 213              	.LVL18:
  47:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret2,1,100);
 214              		.loc 1 47 2 view .LVU42
 215 0050 0022     		movs	r2, #0
 216 0052 0421     		movs	r1, #4
 217 0054 2046     		mov	r0, r4
 218 0056 FFF7FEFF 		bl	HAL_GPIO_WritePin
 219              	.LVL19:
  48:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val2,1,100);
 220              		.loc 1 48 2 view .LVU43
 221 005a 6423     		movs	r3, #100
 222 005c 0122     		movs	r2, #1
 223 005e 0DF10601 		add	r1, sp, #6
 224 0062 2846     		mov	r0, r5
 225 0064 FFF7FEFF 		bl	HAL_SPI_Transmit
 226              	.LVL20:
  49:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 227              		.loc 1 49 2 view .LVU44
 228 0068 6423     		movs	r3, #100
 229 006a 0122     		movs	r2, #1
 230 006c 01A9     		add	r1, sp, #4
 231 006e 2846     		mov	r0, r5
 232 0070 FFF7FEFF 		bl	HAL_SPI_Receive
 233              	.LVL21:
  50:Core/Src/HardWare/ICM_20648.c **** 	law_data = ( ((uint16_t)val1 << 8) | ((uint16_t)val2) );
 234              		.loc 1 50 2 view .LVU45
 235 0074 0122     		movs	r2, #1
 236 0076 0421     		movs	r1, #4
 237 0078 2046     		mov	r0, r4
 238 007a FFF7FEFF 		bl	HAL_GPIO_WritePin
 239              	.LVL22:
  51:Core/Src/HardWare/ICM_20648.c **** 	res = (float)law_data;
 240              		.loc 1 51 2 view .LVU46
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 7


  51:Core/Src/HardWare/ICM_20648.c **** 	res = (float)law_data;
 241              		.loc 1 51 16 is_stmt 0 view .LVU47
 242 007e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
  51:Core/Src/HardWare/ICM_20648.c **** 	res = (float)law_data;
 243              		.loc 1 51 31 view .LVU48
 244 0082 1B02     		lsls	r3, r3, #8
  51:Core/Src/HardWare/ICM_20648.c **** 	res = (float)law_data;
 245              		.loc 1 51 37 view .LVU49
 246 0084 1BB2     		sxth	r3, r3
 247 0086 9DF80420 		ldrb	r2, [sp, #4]	@ zero_extendqisi2
  51:Core/Src/HardWare/ICM_20648.c **** 	res = (float)law_data;
 248              		.loc 1 51 11 view .LVU50
 249 008a 1343     		orrs	r3, r3, r2
 250 008c 00EE103A 		vmov	s0, r3	@ int
 251              	.LVL23:
  52:Core/Src/HardWare/ICM_20648.c **** 	return res;
 252              		.loc 1 52 2 is_stmt 1 view .LVU51
  53:Core/Src/HardWare/ICM_20648.c **** }
 253              		.loc 1 53 2 view .LVU52
  54:Core/Src/HardWare/ICM_20648.c **** 
 254              		.loc 1 54 1 is_stmt 0 view .LVU53
 255 0090 B8EEC00A 		vcvt.f32.s32	s0, s0
 256              	.LVL24:
  54:Core/Src/HardWare/ICM_20648.c **** 
 257              		.loc 1 54 1 view .LVU54
 258 0094 03B0     		add	sp, sp, #12
 259              	.LCFI5:
 260              		.cfi_def_cfa_offset 12
 261              	.LVL25:
  54:Core/Src/HardWare/ICM_20648.c **** 
 262              		.loc 1 54 1 view .LVU55
 263              		@ sp needed
 264 0096 30BD     		pop	{r4, r5, pc}
 265              	.LVL26:
 266              	.L12:
  54:Core/Src/HardWare/ICM_20648.c **** 
 267              		.loc 1 54 1 view .LVU56
 268              		.align	2
 269              	.L11:
 270 0098 000C0240 		.word	1073875968
 271 009c 00000000 		.word	hspi3
 272              		.cfi_endproc
 273              	.LFE239:
 275              		.section	.text.median_filter,"ax",%progbits
 276              		.align	1
 277              		.global	median_filter
 278              		.syntax unified
 279              		.thumb
 280              		.thumb_func
 282              	median_filter:
 283              	.LVL27:
 284              	.LFB241:
  72:Core/Src/HardWare/ICM_20648.c **** int16_t median_filter(int16_t *new_data)
  73:Core/Src/HardWare/ICM_20648.c **** {
 285              		.loc 1 73 1 is_stmt 1 view -0
 286              		.cfi_startproc
 287              		@ args = 0, pretend = 0, frame = 8
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 8


 288              		@ frame_needed = 0, uses_anonymous_args = 0
 289              		.loc 1 73 1 is_stmt 0 view .LVU58
 290 0000 00B5     		push	{lr}
 291              	.LCFI6:
 292              		.cfi_def_cfa_offset 4
 293              		.cfi_offset 14, -4
 294 0002 83B0     		sub	sp, sp, #12
 295              	.LCFI7:
 296              		.cfi_def_cfa_offset 16
  74:Core/Src/HardWare/ICM_20648.c **** 	static int16_t filter[3]={0};
 297              		.loc 1 74 2 is_stmt 1 view .LVU59
  75:Core/Src/HardWare/ICM_20648.c **** 	int16_t sorted[3]={0};
 298              		.loc 1 75 2 view .LVU60
 299              		.loc 1 75 10 is_stmt 0 view .LVU61
 300 0004 0023     		movs	r3, #0
 301 0006 0093     		str	r3, [sp]
 302 0008 ADF80430 		strh	r3, [sp, #4]	@ movhi
  76:Core/Src/HardWare/ICM_20648.c **** 	//register static int cnt=0; //サイクリックバッファ用
  77:Core/Src/HardWare/ICM_20648.c **** 	//シフト
  78:Core/Src/HardWare/ICM_20648.c **** #if 0
  79:Core/Src/HardWare/ICM_20648.c **** 	filter[cnt] = filter[cnt+1];
  80:Core/Src/HardWare/ICM_20648.c **** 	filter[cnt+1] = filter[cnt+2];
  81:Core/Src/HardWare/ICM_20648.c **** 	filter[cnt+2] = filter[cnt+3];
  82:Core/Src/HardWare/ICM_20648.c **** 	filter[cnt+3] = filter[cnt+4];
  83:Core/Src/HardWare/ICM_20648.c **** 	filter[cnt+4] = new_data;
  84:Core/Src/HardWare/ICM_20648.c **** #else
  85:Core/Src/HardWare/ICM_20648.c **** 	filter[0] = filter[1];
 303              		.loc 1 85 2 is_stmt 1 view .LVU62
 304              		.loc 1 85 20 is_stmt 0 view .LVU63
 305 000c 0D4B     		ldr	r3, .L15
 306 000e B3F902C0 		ldrsh	ip, [r3, #2]
 307              		.loc 1 85 12 view .LVU64
 308 0012 A3F800C0 		strh	ip, [r3]	@ movhi
  86:Core/Src/HardWare/ICM_20648.c **** 	filter[1] = filter[2];
 309              		.loc 1 86 2 is_stmt 1 view .LVU65
 310              		.loc 1 86 20 is_stmt 0 view .LVU66
 311 0016 B3F90410 		ldrsh	r1, [r3, #4]
 312              		.loc 1 86 12 view .LVU67
 313 001a 5980     		strh	r1, [r3, #2]	@ movhi
  87:Core/Src/HardWare/ICM_20648.c **** 	filter[2] = *new_data;//filter[3];
 314              		.loc 1 87 2 is_stmt 1 view .LVU68
 315              		.loc 1 87 14 is_stmt 0 view .LVU69
 316 001c B0F90020 		ldrsh	r2, [r0]
 317              		.loc 1 87 12 view .LVU70
 318 0020 9A80     		strh	r2, [r3, #4]	@ movhi
  88:Core/Src/HardWare/ICM_20648.c **** //	filter[3] = filter[4];
  89:Core/Src/HardWare/ICM_20648.c **** //	filter[4] = *new_data;
  90:Core/Src/HardWare/ICM_20648.c **** 
  91:Core/Src/HardWare/ICM_20648.c **** 	sorted[0] = filter[0];
 319              		.loc 1 91 2 is_stmt 1 view .LVU71
 320              		.loc 1 91 12 is_stmt 0 view .LVU72
 321 0022 ADF800C0 		strh	ip, [sp]	@ movhi
  92:Core/Src/HardWare/ICM_20648.c **** 	sorted[1] = filter[1];
 322              		.loc 1 92 2 is_stmt 1 view .LVU73
 323              		.loc 1 92 12 is_stmt 0 view .LVU74
 324 0026 ADF80210 		strh	r1, [sp, #2]	@ movhi
  93:Core/Src/HardWare/ICM_20648.c **** 	sorted[2] = *new_data;//filter[2];
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 9


 325              		.loc 1 93 2 is_stmt 1 view .LVU75
 326              		.loc 1 93 12 is_stmt 0 view .LVU76
 327 002a ADF80420 		strh	r2, [sp, #4]	@ movhi
  94:Core/Src/HardWare/ICM_20648.c **** //	sorted[3] = filter[3];
  95:Core/Src/HardWare/ICM_20648.c **** //	sorted[4] = filter[4];
  96:Core/Src/HardWare/ICM_20648.c **** #endif
  97:Core/Src/HardWare/ICM_20648.c **** 	//ソートする
  98:Core/Src/HardWare/ICM_20648.c **** 	qsort(sorted, sizeof(sorted) / sizeof(sorted[0]), sizeof(int16_t),compare_num);
 328              		.loc 1 98 2 is_stmt 1 view .LVU77
 329 002e 064B     		ldr	r3, .L15+4
 330 0030 0222     		movs	r2, #2
 331 0032 0321     		movs	r1, #3
 332 0034 6846     		mov	r0, sp
 333              	.LVL28:
 334              		.loc 1 98 2 is_stmt 0 view .LVU78
 335 0036 FFF7FEFF 		bl	qsort
 336              	.LVL29:
  99:Core/Src/HardWare/ICM_20648.c **** 	//qsort(sorted, sizeof(sorted) / sizeof(sorted[0]), sizeof(int),compare_num);
 100:Core/Src/HardWare/ICM_20648.c **** 	//中央値を返す
 101:Core/Src/HardWare/ICM_20648.c **** 	return sorted[1];
 337              		.loc 1 101 2 is_stmt 1 view .LVU79
 102:Core/Src/HardWare/ICM_20648.c **** }
 338              		.loc 1 102 1 is_stmt 0 view .LVU80
 339 003a BDF90200 		ldrsh	r0, [sp, #2]
 340 003e 03B0     		add	sp, sp, #12
 341              	.LCFI8:
 342              		.cfi_def_cfa_offset 4
 343              		@ sp needed
 344 0040 5DF804FB 		ldr	pc, [sp], #4
 345              	.L16:
 346              		.align	2
 347              	.L15:
 348 0044 00000000 		.word	.LANCHOR0
 349 0048 00000000 		.word	compare_num
 350              		.cfi_endproc
 351              	.LFE241:
 353              		.global	__aeabi_f2d
 354              		.global	__aeabi_dmul
 355              		.global	__aeabi_dsub
 356              		.global	__aeabi_dadd
 357              		.global	__aeabi_d2f
 358              		.section	.text.Update_IMU,"ax",%progbits
 359              		.align	1
 360              		.global	Update_IMU
 361              		.syntax unified
 362              		.thumb
 363              		.thumb_func
 365              	Update_IMU:
 366              	.LVL30:
 367              	.LFB242:
 103:Core/Src/HardWare/ICM_20648.c **** //割込み内で呼ぶセット
 104:Core/Src/HardWare/ICM_20648.c **** inline void Update_IMU(float *angv, float *angle )
 105:Core/Src/HardWare/ICM_20648.c **** {
 368              		.loc 1 105 1 is_stmt 1 view -0
 369              		.cfi_startproc
 370              		@ args = 0, pretend = 0, frame = 16
 371              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 10


 372              		.loc 1 105 1 is_stmt 0 view .LVU82
 373 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 374              	.LCFI9:
 375              		.cfi_def_cfa_offset 20
 376              		.cfi_offset 4, -20
 377              		.cfi_offset 5, -16
 378              		.cfi_offset 6, -12
 379              		.cfi_offset 7, -8
 380              		.cfi_offset 14, -4
 381 0002 85B0     		sub	sp, sp, #20
 382              	.LCFI10:
 383              		.cfi_def_cfa_offset 40
 384 0004 0746     		mov	r7, r0
 385 0006 0C46     		mov	r4, r1
 106:Core/Src/HardWare/ICM_20648.c **** 	uint8_t ret1, ret2,val1,val2;
 386              		.loc 1 106 2 is_stmt 1 view .LVU83
 107:Core/Src/HardWare/ICM_20648.c **** 		uint8_t ret[2] = {
 387              		.loc 1 107 3 view .LVU84
 388              		.loc 1 107 11 is_stmt 0 view .LVU85
 389 0008 43F63703 		movw	r3, #14391
 390 000c ADF80830 		strh	r3, [sp, #8]	@ movhi
 108:Core/Src/HardWare/ICM_20648.c **** 				0x37,
 109:Core/Src/HardWare/ICM_20648.c **** 				0x38,
 110:Core/Src/HardWare/ICM_20648.c **** 		};
 111:Core/Src/HardWare/ICM_20648.c **** 		int16_t law_data;
 391              		.loc 1 111 3 is_stmt 1 view .LVU86
 112:Core/Src/HardWare/ICM_20648.c **** 		ret1 = ret[0] | 0x80;
 392              		.loc 1 112 3 view .LVU87
 393              		.loc 1 112 8 is_stmt 0 view .LVU88
 394 0010 B723     		movs	r3, #183
 395 0012 8DF80F30 		strb	r3, [sp, #15]
 113:Core/Src/HardWare/ICM_20648.c **** 		ret2 = ret[1] | 0x80;
 396              		.loc 1 113 3 is_stmt 1 view .LVU89
 397              		.loc 1 113 8 is_stmt 0 view .LVU90
 398 0016 B823     		movs	r3, #184
 399 0018 8DF80E30 		strb	r3, [sp, #14]
 114:Core/Src/HardWare/ICM_20648.c **** 		CS_RESET;
 400              		.loc 1 114 3 is_stmt 1 view .LVU91
 401 001c 364D     		ldr	r5, .L19+16
 402 001e 0022     		movs	r2, #0
 403 0020 0421     		movs	r1, #4
 404              	.LVL31:
 405              		.loc 1 114 3 is_stmt 0 view .LVU92
 406 0022 2846     		mov	r0, r5
 407              	.LVL32:
 408              		.loc 1 114 3 view .LVU93
 409 0024 FFF7FEFF 		bl	HAL_GPIO_WritePin
 410              	.LVL33:
 115:Core/Src/HardWare/ICM_20648.c **** 		HAL_SPI_Transmit(&hspi3,&ret1,1,100);
 411              		.loc 1 115 3 is_stmt 1 view .LVU94
 412 0028 344E     		ldr	r6, .L19+20
 413 002a 6423     		movs	r3, #100
 414 002c 0122     		movs	r2, #1
 415 002e 0DF10F01 		add	r1, sp, #15
 416 0032 3046     		mov	r0, r6
 417 0034 FFF7FEFF 		bl	HAL_SPI_Transmit
 418              	.LVL34:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 11


 116:Core/Src/HardWare/ICM_20648.c **** 		HAL_SPI_Receive(&hspi3,&val1,1,100);
 419              		.loc 1 116 3 view .LVU95
 420 0038 6423     		movs	r3, #100
 421 003a 0122     		movs	r2, #1
 422 003c 0DF10D01 		add	r1, sp, #13
 423 0040 3046     		mov	r0, r6
 424 0042 FFF7FEFF 		bl	HAL_SPI_Receive
 425              	.LVL35:
 117:Core/Src/HardWare/ICM_20648.c **** 		CS_SET;
 426              		.loc 1 117 3 view .LVU96
 427 0046 0122     		movs	r2, #1
 428 0048 0421     		movs	r1, #4
 429 004a 2846     		mov	r0, r5
 430 004c FFF7FEFF 		bl	HAL_GPIO_WritePin
 431              	.LVL36:
 118:Core/Src/HardWare/ICM_20648.c **** 
 119:Core/Src/HardWare/ICM_20648.c **** 		CS_RESET;
 432              		.loc 1 119 3 view .LVU97
 433 0050 0022     		movs	r2, #0
 434 0052 0421     		movs	r1, #4
 435 0054 2846     		mov	r0, r5
 436 0056 FFF7FEFF 		bl	HAL_GPIO_WritePin
 437              	.LVL37:
 120:Core/Src/HardWare/ICM_20648.c **** 		HAL_SPI_Transmit(&hspi3,&ret2,1,100);
 438              		.loc 1 120 3 view .LVU98
 439 005a 6423     		movs	r3, #100
 440 005c 0122     		movs	r2, #1
 441 005e 0DF10E01 		add	r1, sp, #14
 442 0062 3046     		mov	r0, r6
 443 0064 FFF7FEFF 		bl	HAL_SPI_Transmit
 444              	.LVL38:
 121:Core/Src/HardWare/ICM_20648.c **** 		HAL_SPI_Receive(&hspi3,&val2,1,100);
 445              		.loc 1 121 3 view .LVU99
 446 0068 6423     		movs	r3, #100
 447 006a 0122     		movs	r2, #1
 448 006c 03A9     		add	r1, sp, #12
 449 006e 3046     		mov	r0, r6
 450 0070 FFF7FEFF 		bl	HAL_SPI_Receive
 451              	.LVL39:
 122:Core/Src/HardWare/ICM_20648.c **** 		CS_SET;
 452              		.loc 1 122 3 view .LVU100
 453 0074 0122     		movs	r2, #1
 454 0076 0421     		movs	r1, #4
 455 0078 2846     		mov	r0, r5
 456 007a FFF7FEFF 		bl	HAL_GPIO_WritePin
 457              	.LVL40:
 123:Core/Src/HardWare/ICM_20648.c **** 		law_data = ( ((uint16_t)val1 << 8) | ((uint16_t)val2) );
 458              		.loc 1 123 3 view .LVU101
 459              		.loc 1 123 17 is_stmt 0 view .LVU102
 460 007e 9DF80D20 		ldrb	r2, [sp, #13]	@ zero_extendqisi2
 461              		.loc 1 123 38 view .LVU103
 462 0082 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
 463 0086 43EA0223 		orr	r3, r3, r2, lsl #8
 464              		.loc 1 123 12 view .LVU104
 465 008a ADF80630 		strh	r3, [sp, #6]	@ movhi
 124:Core/Src/HardWare/ICM_20648.c **** 
 125:Core/Src/HardWare/ICM_20648.c **** 		//static int16_t zg_last=0;
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 12


 126:Core/Src/HardWare/ICM_20648.c **** 		int16_t zg_median;
 466              		.loc 1 126 3 is_stmt 1 view .LVU105
 127:Core/Src/HardWare/ICM_20648.c **** 
 128:Core/Src/HardWare/ICM_20648.c **** 		//2000回目で0.17
 129:Core/Src/HardWare/ICM_20648.c **** 		zg_median = median_filter(&law_data);
 467              		.loc 1 129 3 view .LVU106
 468              		.loc 1 129 15 is_stmt 0 view .LVU107
 469 008e 0DF10600 		add	r0, sp, #6
 470 0092 FFF7FEFF 		bl	median_filter
 471              	.LVL41:
 130:Core/Src/HardWare/ICM_20648.c **** 		ZGFilterd = zg_median;
 472              		.loc 1 130 3 is_stmt 1 view .LVU108
 473              		.loc 1 130 13 is_stmt 0 view .LVU109
 474 0096 1A4B     		ldr	r3, .L19+24
 475 0098 1880     		strh	r0, [r3]	@ movhi
 131:Core/Src/HardWare/ICM_20648.c **** 		ZGyro = (float)zg_median * convert_to_imu_angv;
 476              		.loc 1 131 3 is_stmt 1 view .LVU110
 477              		.loc 1 131 11 is_stmt 0 view .LVU111
 478 009a 07EE900A 		vmov	s15, r0	@ int
 479 009e F8EEE77A 		vcvt.f32.s32	s15, s15
 480              		.loc 1 131 28 view .LVU112
 481 00a2 9FED187A 		vldr.32	s14, .L19+28
 482 00a6 67EE877A 		vmul.f32	s15, s15, s14
 483              		.loc 1 131 9 view .LVU113
 484 00aa 174B     		ldr	r3, .L19+32
 485 00ac C3ED007A 		vstr.32	s15, [r3]
 132:Core/Src/HardWare/ICM_20648.c **** 
 133:Core/Src/HardWare/ICM_20648.c **** #if 0
 134:Core/Src/HardWare/ICM_20648.c **** 		*angv = -((0.01*ZGyro) + (0.99)* (zg_last));
 135:Core/Src/HardWare/ICM_20648.c **** 		zg_last = ZGyro;
 136:Core/Src/HardWare/ICM_20648.c **** 		//Angle;
 137:Core/Src/HardWare/ICM_20648.c **** 		*angle += *angv *0.001;
 138:Core/Src/HardWare/ICM_20648.c **** #else
 139:Core/Src/HardWare/ICM_20648.c **** 		// *angv = -ZGyro; //角速度 rad / s
 140:Core/Src/HardWare/ICM_20648.c **** 		// *angle += *angv * 0.001  - 0.000001784;//- 0.0000018432; //角度 rad
 141:Core/Src/HardWare/ICM_20648.c **** 
 142:Core/Src/HardWare/ICM_20648.c **** 		*angv = ZGyro; //角速度 rad / s
 486              		.loc 1 142 3 is_stmt 1 view .LVU114
 487              		.loc 1 142 9 is_stmt 0 view .LVU115
 488 00b0 1868     		ldr	r0, [r3]	@ float
 489              	.LVL42:
 490              		.loc 1 142 9 view .LVU116
 491 00b2 3860     		str	r0, [r7]	@ float
 492              	.LVL43:
 143:Core/Src/HardWare/ICM_20648.c **** 		*angle += *angv * 0.001  - 0.000001784;//- 0.0000018432; //角度 rad
 493              		.loc 1 143 3 is_stmt 1 view .LVU117
 494              		.loc 1 143 13 is_stmt 0 view .LVU118
 495 00b4 FFF7FEFF 		bl	__aeabi_f2d
 496              	.LVL44:
 497              		.loc 1 143 19 view .LVU119
 498 00b8 0BA3     		adr	r3, .L19
 499 00ba D3E90023 		ldrd	r2, [r3]
 500 00be FFF7FEFF 		bl	__aeabi_dmul
 501              	.LVL45:
 502              		.loc 1 143 28 view .LVU120
 503 00c2 0BA3     		adr	r3, .L19+8
 504 00c4 D3E90023 		ldrd	r2, [r3]
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 13


 505 00c8 FFF7FEFF 		bl	__aeabi_dsub
 506              	.LVL46:
 507 00cc 0646     		mov	r6, r0
 508 00ce 0F46     		mov	r7, r1
 509              	.LVL47:
 510              		.loc 1 143 10 view .LVU121
 511 00d0 2068     		ldr	r0, [r4]	@ float
 512 00d2 FFF7FEFF 		bl	__aeabi_f2d
 513              	.LVL48:
 514 00d6 3246     		mov	r2, r6
 515 00d8 3B46     		mov	r3, r7
 516 00da FFF7FEFF 		bl	__aeabi_dadd
 517              	.LVL49:
 518 00de FFF7FEFF 		bl	__aeabi_d2f
 519              	.LVL50:
 520 00e2 2060     		str	r0, [r4]	@ float
 144:Core/Src/HardWare/ICM_20648.c **** #endif
 145:Core/Src/HardWare/ICM_20648.c **** }
 521              		.loc 1 145 1 view .LVU122
 522 00e4 05B0     		add	sp, sp, #20
 523              	.LCFI11:
 524              		.cfi_def_cfa_offset 20
 525              		@ sp needed
 526 00e6 F0BD     		pop	{r4, r5, r6, r7, pc}
 527              	.LVL51:
 528              	.L20:
 529              		.loc 1 145 1 view .LVU123
 530              		.align	3
 531              	.L19:
 532 00e8 FCA9F1D2 		.word	-755914244
 533 00ec 4D62503F 		.word	1062232653
 534 00f0 D7A973BE 		.word	-1099716137
 535 00f4 38EEBD3E 		.word	1052634680
 536 00f8 000C0240 		.word	1073875968
 537 00fc 00000000 		.word	hspi3
 538 0100 00000000 		.word	.LANCHOR1
 539 0104 787D8B3A 		.word	982220152
 540 0108 00000000 		.word	.LANCHOR2
 541              		.cfi_endproc
 542              	.LFE242:
 544              		.section	.text.write_byte,"ax",%progbits
 545              		.align	1
 546              		.global	write_byte
 547              		.syntax unified
 548              		.thumb
 549              		.thumb_func
 551              	write_byte:
 552              	.LVL52:
 553              	.LFB243:
 146:Core/Src/HardWare/ICM_20648.c **** 
 147:Core/Src/HardWare/ICM_20648.c **** void write_byte( uint8_t reg, uint8_t val )  {
 554              		.loc 1 147 46 is_stmt 1 view -0
 555              		.cfi_startproc
 556              		@ args = 0, pretend = 0, frame = 16
 557              		@ frame_needed = 0, uses_anonymous_args = 0
 558              		.loc 1 147 46 is_stmt 0 view .LVU125
 559 0000 30B5     		push	{r4, r5, lr}
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 14


 560              	.LCFI12:
 561              		.cfi_def_cfa_offset 12
 562              		.cfi_offset 4, -12
 563              		.cfi_offset 5, -8
 564              		.cfi_offset 14, -4
 565 0002 85B0     		sub	sp, sp, #20
 566              	.LCFI13:
 567              		.cfi_def_cfa_offset 32
 568 0004 8DF80710 		strb	r1, [sp, #7]
 148:Core/Src/HardWare/ICM_20648.c **** 	uint8_t ret;
 569              		.loc 1 148 2 is_stmt 1 view .LVU126
 149:Core/Src/HardWare/ICM_20648.c **** 
 150:Core/Src/HardWare/ICM_20648.c **** 	ret = reg & 0x7F;
 570              		.loc 1 150 2 view .LVU127
 571              		.loc 1 150 12 is_stmt 0 view .LVU128
 572 0008 00F07F00 		and	r0, r0, #127
 573              	.LVL53:
 574              		.loc 1 150 6 view .LVU129
 575 000c 8DF80F00 		strb	r0, [sp, #15]
 151:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 576              		.loc 1 151 2 is_stmt 1 view .LVU130
 577 0010 0D4C     		ldr	r4, .L23
 578 0012 0022     		movs	r2, #0
 579 0014 0421     		movs	r1, #4
 580              	.LVL54:
 581              		.loc 1 151 2 is_stmt 0 view .LVU131
 582 0016 2046     		mov	r0, r4
 583 0018 FFF7FEFF 		bl	HAL_GPIO_WritePin
 584              	.LVL55:
 152:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 585              		.loc 1 152 2 is_stmt 1 view .LVU132
 586 001c 0B4D     		ldr	r5, .L23+4
 587 001e 6423     		movs	r3, #100
 588 0020 0122     		movs	r2, #1
 589 0022 0DF10F01 		add	r1, sp, #15
 590 0026 2846     		mov	r0, r5
 591 0028 FFF7FEFF 		bl	HAL_SPI_Transmit
 592              	.LVL56:
 153:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&val,1,100);
 593              		.loc 1 153 2 view .LVU133
 594 002c 6423     		movs	r3, #100
 595 002e 0122     		movs	r2, #1
 596 0030 0DF10701 		add	r1, sp, #7
 597 0034 2846     		mov	r0, r5
 598 0036 FFF7FEFF 		bl	HAL_SPI_Transmit
 599              	.LVL57:
 154:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 600              		.loc 1 154 2 view .LVU134
 601 003a 0122     		movs	r2, #1
 602 003c 0421     		movs	r1, #4
 603 003e 2046     		mov	r0, r4
 604 0040 FFF7FEFF 		bl	HAL_GPIO_WritePin
 605              	.LVL58:
 155:Core/Src/HardWare/ICM_20648.c **** }
 606              		.loc 1 155 1 is_stmt 0 view .LVU135
 607 0044 05B0     		add	sp, sp, #20
 608              	.LCFI14:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 15


 609              		.cfi_def_cfa_offset 12
 610              		@ sp needed
 611 0046 30BD     		pop	{r4, r5, pc}
 612              	.L24:
 613              		.align	2
 614              	.L23:
 615 0048 000C0240 		.word	1073875968
 616 004c 00000000 		.word	hspi3
 617              		.cfi_endproc
 618              	.LFE243:
 620              		.section	.text.IMU_init,"ax",%progbits
 621              		.align	1
 622              		.global	IMU_init
 623              		.syntax unified
 624              		.thumb
 625              		.thumb_func
 627              	IMU_init:
 628              	.LFB244:
 156:Core/Src/HardWare/ICM_20648.c **** 
 157:Core/Src/HardWare/ICM_20648.c **** uint8_t IMU_init() {
 629              		.loc 1 157 20 is_stmt 1 view -0
 630              		.cfi_startproc
 631              		@ args = 0, pretend = 0, frame = 8
 632              		@ frame_needed = 0, uses_anonymous_args = 0
 633 0000 30B5     		push	{r4, r5, lr}
 634              	.LCFI15:
 635              		.cfi_def_cfa_offset 12
 636              		.cfi_offset 4, -12
 637              		.cfi_offset 5, -8
 638              		.cfi_offset 14, -4
 639 0002 83B0     		sub	sp, sp, #12
 640              	.LCFI16:
 641              		.cfi_def_cfa_offset 24
 158:Core/Src/HardWare/ICM_20648.c **** 	uint8_t who_am_i,ret;
 642              		.loc 1 158 2 view .LVU137
 159:Core/Src/HardWare/ICM_20648.c **** 
 160:Core/Src/HardWare/ICM_20648.c **** 	who_am_i = read_byte(0x00);	//IMU動作確認　0xE0が送られてくればおｋ
 643              		.loc 1 160 2 view .LVU138
 644              	.LVL59:
 645              	.LBB4:
 646              	.LBI4:
  20:Core/Src/HardWare/ICM_20648.c **** 
 647              		.loc 1 20 16 view .LVU139
 648              	.LBB5:
  22:Core/Src/HardWare/ICM_20648.c **** 
 649              		.loc 1 22 2 view .LVU140
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 650              		.loc 1 24 2 view .LVU141
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 651              		.loc 1 24 6 is_stmt 0 view .LVU142
 652 0004 8023     		movs	r3, #128
 653 0006 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 654              		.loc 1 25 2 is_stmt 1 view .LVU143
 655 000a 1D4C     		ldr	r4, .L29
 656 000c 0022     		movs	r2, #0
 657 000e 0421     		movs	r1, #4
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 16


 658 0010 2046     		mov	r0, r4
 659 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 660              	.LVL60:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 661              		.loc 1 26 2 view .LVU144
 662 0016 1B4D     		ldr	r5, .L29+4
 663 0018 6423     		movs	r3, #100
 664 001a 0122     		movs	r2, #1
 665 001c 0DF10601 		add	r1, sp, #6
 666 0020 2846     		mov	r0, r5
 667 0022 FFF7FEFF 		bl	HAL_SPI_Transmit
 668              	.LVL61:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 669              		.loc 1 27 2 view .LVU145
 670 0026 6423     		movs	r3, #100
 671 0028 0122     		movs	r2, #1
 672 002a 0DF10701 		add	r1, sp, #7
 673 002e 2846     		mov	r0, r5
 674 0030 FFF7FEFF 		bl	HAL_SPI_Receive
 675              	.LVL62:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 676              		.loc 1 28 2 view .LVU146
 677 0034 0122     		movs	r2, #1
 678 0036 0421     		movs	r1, #4
 679 0038 2046     		mov	r0, r4
 680 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 681              	.LVL63:
  29:Core/Src/HardWare/ICM_20648.c **** }
 682              		.loc 1 29 2 view .LVU147
  29:Core/Src/HardWare/ICM_20648.c **** }
 683              		.loc 1 29 9 is_stmt 0 view .LVU148
 684 003e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 685              	.LVL64:
  29:Core/Src/HardWare/ICM_20648.c **** }
 686              		.loc 1 29 9 view .LVU149
 687              	.LBE5:
 688              	.LBE4:
 161:Core/Src/HardWare/ICM_20648.c **** 	if ( who_am_i == 0xE0 ) {
 689              		.loc 1 161 2 is_stmt 1 view .LVU150
 690              		.loc 1 161 5 is_stmt 0 view .LVU151
 691 0042 E02B     		cmp	r3, #224
 692 0044 02D0     		beq	.L28
 693              	.LVL65:
 694              	.L26:
 162:Core/Src/HardWare/ICM_20648.c **** 		ret = 1;
 163:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x06,0x01);	//PWR_MGMT_1	スリープﾓｰﾄﾞ解除
 164:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x03,0x10);	//USER_CTRL	諸々機能無効　SPIonly
 165:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x7F,0x20);	//USER_BANK2
 166:Core/Src/HardWare/ICM_20648.c **** 
 167:Core/Src/HardWare/ICM_20648.c **** 		//write_byte(0x01,0x06);	//	レンジ±2000dps DLPF disable
 168:Core/Src/HardWare/ICM_20648.c **** 		//write_byte(0x01,0x07);	//range±2000dps DLPF enable DLPFCFG = 0
 169:Core/Src/HardWare/ICM_20648.c **** 		//write_byte(0x01,0x0F);	//range±2000dps DLPF enable DLPFCFG = 1
 170:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x01,0x17);	//range±2000dps DLPF enable DLPFCFG = 2
 171:Core/Src/HardWare/ICM_20648.c **** 		//2:1 GYRO_FS_SEL[1:0] 00:±250	01:±500 10:±1000 11:±2000
 172:Core/Src/HardWare/ICM_20648.c **** 
 173:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x14,0x17);	//	レンジ±16g 0x06
 174:Core/Src/HardWare/ICM_20648.c **** 		//2:1 ACCEL_FS_SEL[1:0] 00:±2	01:±4 10:±8 11:±16
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 17


 175:Core/Src/HardWare/ICM_20648.c **** 
 176:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x7F,0x00);	//USER_BANK0
 177:Core/Src/HardWare/ICM_20648.c **** 	}
 178:Core/Src/HardWare/ICM_20648.c **** 	return ret;
 695              		.loc 1 178 2 is_stmt 1 view .LVU152
 179:Core/Src/HardWare/ICM_20648.c **** 	//0x14, 0x7F : 0000 1110, 0111 1111
 180:Core/Src/HardWare/ICM_20648.c **** 	//retはregのまま。
 181:Core/Src/HardWare/ICM_20648.c **** }
 696              		.loc 1 181 1 is_stmt 0 view .LVU153
 697 0046 0120     		movs	r0, #1
 698 0048 03B0     		add	sp, sp, #12
 699              	.LCFI17:
 700              		.cfi_remember_state
 701              		.cfi_def_cfa_offset 12
 702              		@ sp needed
 703 004a 30BD     		pop	{r4, r5, pc}
 704              	.LVL66:
 705              	.L28:
 706              	.LCFI18:
 707              		.cfi_restore_state
 162:Core/Src/HardWare/ICM_20648.c **** 		ret = 1;
 708              		.loc 1 162 3 is_stmt 1 view .LVU154
 163:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x03,0x10);	//USER_CTRL	諸々機能無効　SPIonly
 709              		.loc 1 163 3 view .LVU155
 710 004c 0121     		movs	r1, #1
 711 004e 0620     		movs	r0, #6
 712 0050 FFF7FEFF 		bl	write_byte
 713              	.LVL67:
 164:Core/Src/HardWare/ICM_20648.c **** 		write_byte(0x7F,0x20);	//USER_BANK2
 714              		.loc 1 164 3 view .LVU156
 715 0054 1021     		movs	r1, #16
 716 0056 0320     		movs	r0, #3
 717 0058 FFF7FEFF 		bl	write_byte
 718              	.LVL68:
 165:Core/Src/HardWare/ICM_20648.c **** 
 719              		.loc 1 165 3 view .LVU157
 720 005c 2021     		movs	r1, #32
 721 005e 7F20     		movs	r0, #127
 722 0060 FFF7FEFF 		bl	write_byte
 723              	.LVL69:
 170:Core/Src/HardWare/ICM_20648.c **** 		//2:1 GYRO_FS_SEL[1:0] 00:±250	01:±500 10:±1000 11:±2000
 724              		.loc 1 170 3 view .LVU158
 725 0064 1721     		movs	r1, #23
 726 0066 0120     		movs	r0, #1
 727 0068 FFF7FEFF 		bl	write_byte
 728              	.LVL70:
 173:Core/Src/HardWare/ICM_20648.c **** 		//2:1 ACCEL_FS_SEL[1:0] 00:±2	01:±4 10:±8 11:±16
 729              		.loc 1 173 3 view .LVU159
 730 006c 1721     		movs	r1, #23
 731 006e 1420     		movs	r0, #20
 732 0070 FFF7FEFF 		bl	write_byte
 733              	.LVL71:
 176:Core/Src/HardWare/ICM_20648.c **** 	}
 734              		.loc 1 176 3 view .LVU160
 735 0074 0021     		movs	r1, #0
 736 0076 7F20     		movs	r0, #127
 737 0078 FFF7FEFF 		bl	write_byte
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 18


 738              	.LVL72:
 739 007c E3E7     		b	.L26
 740              	.L30:
 741 007e 00BF     		.align	2
 742              	.L29:
 743 0080 000C0240 		.word	1073875968
 744 0084 00000000 		.word	hspi3
 745              		.cfi_endproc
 746              	.LFE244:
 748              		.section	.text.read_gyro_data,"ax",%progbits
 749              		.align	1
 750              		.global	read_gyro_data
 751              		.syntax unified
 752              		.thumb
 753              		.thumb_func
 755              	read_gyro_data:
 756              	.LFB245:
 182:Core/Src/HardWare/ICM_20648.c **** 
 183:Core/Src/HardWare/ICM_20648.c **** void read_gyro_data() {
 757              		.loc 1 183 23 view -0
 758              		.cfi_startproc
 759              		@ args = 0, pretend = 0, frame = 8
 760              		@ frame_needed = 0, uses_anonymous_args = 0
 761 0000 70B5     		push	{r4, r5, r6, lr}
 762              	.LCFI19:
 763              		.cfi_def_cfa_offset 16
 764              		.cfi_offset 4, -16
 765              		.cfi_offset 5, -12
 766              		.cfi_offset 6, -8
 767              		.cfi_offset 14, -4
 768 0002 82B0     		sub	sp, sp, #8
 769              	.LCFI20:
 770              		.cfi_def_cfa_offset 24
 184:Core/Src/HardWare/ICM_20648.c **** 	xg = ((uint16_t)read_byte(0x33) << 8) | ((uint16_t)read_byte(0x34));
 771              		.loc 1 184 2 view .LVU162
 772              	.LVL73:
 773              	.LBB18:
 774              	.LBI18:
  20:Core/Src/HardWare/ICM_20648.c **** 
 775              		.loc 1 20 16 view .LVU163
 776              	.LBB19:
  22:Core/Src/HardWare/ICM_20648.c **** 
 777              		.loc 1 22 2 view .LVU164
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 778              		.loc 1 24 2 view .LVU165
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 779              		.loc 1 24 6 is_stmt 0 view .LVU166
 780 0004 B323     		movs	r3, #179
 781 0006 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 782              		.loc 1 25 2 is_stmt 1 view .LVU167
 783 000a 5F4C     		ldr	r4, .L33
 784 000c 0022     		movs	r2, #0
 785 000e 0421     		movs	r1, #4
 786 0010 2046     		mov	r0, r4
 787 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 788              	.LVL74:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 19


  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 789              		.loc 1 26 2 view .LVU168
 790 0016 5D4D     		ldr	r5, .L33+4
 791 0018 6423     		movs	r3, #100
 792 001a 0122     		movs	r2, #1
 793 001c 0DF10601 		add	r1, sp, #6
 794 0020 2846     		mov	r0, r5
 795 0022 FFF7FEFF 		bl	HAL_SPI_Transmit
 796              	.LVL75:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 797              		.loc 1 27 2 view .LVU169
 798 0026 6423     		movs	r3, #100
 799 0028 0122     		movs	r2, #1
 800 002a 0DF10701 		add	r1, sp, #7
 801 002e 2846     		mov	r0, r5
 802 0030 FFF7FEFF 		bl	HAL_SPI_Receive
 803              	.LVL76:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 804              		.loc 1 28 2 view .LVU170
 805 0034 0122     		movs	r2, #1
 806 0036 0421     		movs	r1, #4
 807 0038 2046     		mov	r0, r4
 808 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 809              	.LVL77:
  29:Core/Src/HardWare/ICM_20648.c **** }
 810              		.loc 1 29 2 view .LVU171
  29:Core/Src/HardWare/ICM_20648.c **** }
 811              		.loc 1 29 9 is_stmt 0 view .LVU172
 812 003e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 813              	.LVL78:
  29:Core/Src/HardWare/ICM_20648.c **** }
 814              		.loc 1 29 9 view .LVU173
 815              	.LBE19:
 816              	.LBE18:
 817              		.loc 1 184 34 view .LVU174
 818 0042 1E02     		lsls	r6, r3, #8
 819              	.LVL79:
 820              	.LBB20:
 821              	.LBI20:
  20:Core/Src/HardWare/ICM_20648.c **** 
 822              		.loc 1 20 16 is_stmt 1 view .LVU175
 823              	.LBB21:
  22:Core/Src/HardWare/ICM_20648.c **** 
 824              		.loc 1 22 2 view .LVU176
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 825              		.loc 1 24 2 view .LVU177
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 826              		.loc 1 24 6 is_stmt 0 view .LVU178
 827 0044 B423     		movs	r3, #180
 828 0046 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 829              		.loc 1 25 2 is_stmt 1 view .LVU179
 830 004a 0022     		movs	r2, #0
 831 004c 0421     		movs	r1, #4
 832 004e 2046     		mov	r0, r4
 833 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 834              	.LVL80:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 20


  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 835              		.loc 1 26 2 view .LVU180
 836 0054 6423     		movs	r3, #100
 837 0056 0122     		movs	r2, #1
 838 0058 0DF10601 		add	r1, sp, #6
 839 005c 2846     		mov	r0, r5
 840 005e FFF7FEFF 		bl	HAL_SPI_Transmit
 841              	.LVL81:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 842              		.loc 1 27 2 view .LVU181
 843 0062 6423     		movs	r3, #100
 844 0064 0122     		movs	r2, #1
 845 0066 0DF10701 		add	r1, sp, #7
 846 006a 2846     		mov	r0, r5
 847 006c FFF7FEFF 		bl	HAL_SPI_Receive
 848              	.LVL82:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 849              		.loc 1 28 2 view .LVU182
 850 0070 0122     		movs	r2, #1
 851 0072 0421     		movs	r1, #4
 852 0074 2046     		mov	r0, r4
 853 0076 FFF7FEFF 		bl	HAL_GPIO_WritePin
 854              	.LVL83:
  29:Core/Src/HardWare/ICM_20648.c **** }
 855              		.loc 1 29 2 view .LVU183
  29:Core/Src/HardWare/ICM_20648.c **** }
 856              		.loc 1 29 2 is_stmt 0 view .LVU184
 857              	.LBE21:
 858              	.LBE20:
 859              		.loc 1 184 53 view .LVU185
 860 007a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 861              		.loc 1 184 40 view .LVU186
 862 007e 3343     		orrs	r3, r3, r6
 863 0080 1BB2     		sxth	r3, r3
 864              		.loc 1 184 5 view .LVU187
 865 0082 434A     		ldr	r2, .L33+8
 866 0084 1380     		strh	r3, [r2]	@ movhi
 185:Core/Src/HardWare/ICM_20648.c **** 	yg = ((uint16_t)read_byte(0x35) << 8) | ((uint16_t)read_byte(0x36));
 867              		.loc 1 185 2 is_stmt 1 view .LVU188
 868              	.LVL84:
 869              	.LBB22:
 870              	.LBI22:
  20:Core/Src/HardWare/ICM_20648.c **** 
 871              		.loc 1 20 16 view .LVU189
 872              	.LBB23:
  22:Core/Src/HardWare/ICM_20648.c **** 
 873              		.loc 1 22 2 view .LVU190
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 874              		.loc 1 24 2 view .LVU191
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 875              		.loc 1 24 6 is_stmt 0 view .LVU192
 876 0086 B523     		movs	r3, #181
 877 0088 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 878              		.loc 1 25 2 is_stmt 1 view .LVU193
 879 008c 0022     		movs	r2, #0
 880 008e 0421     		movs	r1, #4
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 21


 881 0090 2046     		mov	r0, r4
 882 0092 FFF7FEFF 		bl	HAL_GPIO_WritePin
 883              	.LVL85:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 884              		.loc 1 26 2 view .LVU194
 885 0096 6423     		movs	r3, #100
 886 0098 0122     		movs	r2, #1
 887 009a 0DF10601 		add	r1, sp, #6
 888 009e 2846     		mov	r0, r5
 889 00a0 FFF7FEFF 		bl	HAL_SPI_Transmit
 890              	.LVL86:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 891              		.loc 1 27 2 view .LVU195
 892 00a4 6423     		movs	r3, #100
 893 00a6 0122     		movs	r2, #1
 894 00a8 0DF10701 		add	r1, sp, #7
 895 00ac 2846     		mov	r0, r5
 896 00ae FFF7FEFF 		bl	HAL_SPI_Receive
 897              	.LVL87:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 898              		.loc 1 28 2 view .LVU196
 899 00b2 0122     		movs	r2, #1
 900 00b4 0421     		movs	r1, #4
 901 00b6 2046     		mov	r0, r4
 902 00b8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 903              	.LVL88:
  29:Core/Src/HardWare/ICM_20648.c **** }
 904              		.loc 1 29 2 view .LVU197
  29:Core/Src/HardWare/ICM_20648.c **** }
 905              		.loc 1 29 9 is_stmt 0 view .LVU198
 906 00bc 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 907              	.LVL89:
  29:Core/Src/HardWare/ICM_20648.c **** }
 908              		.loc 1 29 9 view .LVU199
 909              	.LBE23:
 910              	.LBE22:
 911              		.loc 1 185 34 view .LVU200
 912 00c0 1E02     		lsls	r6, r3, #8
 913              	.LVL90:
 914              	.LBB24:
 915              	.LBI24:
  20:Core/Src/HardWare/ICM_20648.c **** 
 916              		.loc 1 20 16 is_stmt 1 view .LVU201
 917              	.LBB25:
  22:Core/Src/HardWare/ICM_20648.c **** 
 918              		.loc 1 22 2 view .LVU202
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 919              		.loc 1 24 2 view .LVU203
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 920              		.loc 1 24 6 is_stmt 0 view .LVU204
 921 00c2 B623     		movs	r3, #182
 922 00c4 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 923              		.loc 1 25 2 is_stmt 1 view .LVU205
 924 00c8 0022     		movs	r2, #0
 925 00ca 0421     		movs	r1, #4
 926 00cc 2046     		mov	r0, r4
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 22


 927 00ce FFF7FEFF 		bl	HAL_GPIO_WritePin
 928              	.LVL91:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 929              		.loc 1 26 2 view .LVU206
 930 00d2 6423     		movs	r3, #100
 931 00d4 0122     		movs	r2, #1
 932 00d6 0DF10601 		add	r1, sp, #6
 933 00da 2846     		mov	r0, r5
 934 00dc FFF7FEFF 		bl	HAL_SPI_Transmit
 935              	.LVL92:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 936              		.loc 1 27 2 view .LVU207
 937 00e0 6423     		movs	r3, #100
 938 00e2 0122     		movs	r2, #1
 939 00e4 0DF10701 		add	r1, sp, #7
 940 00e8 2846     		mov	r0, r5
 941 00ea FFF7FEFF 		bl	HAL_SPI_Receive
 942              	.LVL93:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 943              		.loc 1 28 2 view .LVU208
 944 00ee 0122     		movs	r2, #1
 945 00f0 0421     		movs	r1, #4
 946 00f2 2046     		mov	r0, r4
 947 00f4 FFF7FEFF 		bl	HAL_GPIO_WritePin
 948              	.LVL94:
  29:Core/Src/HardWare/ICM_20648.c **** }
 949              		.loc 1 29 2 view .LVU209
  29:Core/Src/HardWare/ICM_20648.c **** }
 950              		.loc 1 29 2 is_stmt 0 view .LVU210
 951              	.LBE25:
 952              	.LBE24:
 953              		.loc 1 185 53 view .LVU211
 954 00f8 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 955              		.loc 1 185 40 view .LVU212
 956 00fc 3343     		orrs	r3, r3, r6
 957 00fe 1BB2     		sxth	r3, r3
 958              		.loc 1 185 5 view .LVU213
 959 0100 244A     		ldr	r2, .L33+12
 960 0102 1380     		strh	r3, [r2]	@ movhi
 186:Core/Src/HardWare/ICM_20648.c **** 	zg = ((uint16_t)read_byte(0x37) << 8) | ((uint16_t)read_byte(0x38));
 961              		.loc 1 186 2 is_stmt 1 view .LVU214
 962              	.LVL95:
 963              	.LBB26:
 964              	.LBI26:
  20:Core/Src/HardWare/ICM_20648.c **** 
 965              		.loc 1 20 16 view .LVU215
 966              	.LBB27:
  22:Core/Src/HardWare/ICM_20648.c **** 
 967              		.loc 1 22 2 view .LVU216
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 968              		.loc 1 24 2 view .LVU217
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 969              		.loc 1 24 6 is_stmt 0 view .LVU218
 970 0104 B723     		movs	r3, #183
 971 0106 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 972              		.loc 1 25 2 is_stmt 1 view .LVU219
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 23


 973 010a 0022     		movs	r2, #0
 974 010c 0421     		movs	r1, #4
 975 010e 2046     		mov	r0, r4
 976 0110 FFF7FEFF 		bl	HAL_GPIO_WritePin
 977              	.LVL96:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 978              		.loc 1 26 2 view .LVU220
 979 0114 6423     		movs	r3, #100
 980 0116 0122     		movs	r2, #1
 981 0118 0DF10601 		add	r1, sp, #6
 982 011c 2846     		mov	r0, r5
 983 011e FFF7FEFF 		bl	HAL_SPI_Transmit
 984              	.LVL97:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 985              		.loc 1 27 2 view .LVU221
 986 0122 6423     		movs	r3, #100
 987 0124 0122     		movs	r2, #1
 988 0126 0DF10701 		add	r1, sp, #7
 989 012a 2846     		mov	r0, r5
 990 012c FFF7FEFF 		bl	HAL_SPI_Receive
 991              	.LVL98:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 992              		.loc 1 28 2 view .LVU222
 993 0130 0122     		movs	r2, #1
 994 0132 0421     		movs	r1, #4
 995 0134 2046     		mov	r0, r4
 996 0136 FFF7FEFF 		bl	HAL_GPIO_WritePin
 997              	.LVL99:
  29:Core/Src/HardWare/ICM_20648.c **** }
 998              		.loc 1 29 2 view .LVU223
  29:Core/Src/HardWare/ICM_20648.c **** }
 999              		.loc 1 29 9 is_stmt 0 view .LVU224
 1000 013a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1001              	.LVL100:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1002              		.loc 1 29 9 view .LVU225
 1003              	.LBE27:
 1004              	.LBE26:
 1005              		.loc 1 186 34 view .LVU226
 1006 013e 1E02     		lsls	r6, r3, #8
 1007              	.LVL101:
 1008              	.LBB28:
 1009              	.LBI28:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1010              		.loc 1 20 16 is_stmt 1 view .LVU227
 1011              	.LBB29:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1012              		.loc 1 22 2 view .LVU228
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1013              		.loc 1 24 2 view .LVU229
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1014              		.loc 1 24 6 is_stmt 0 view .LVU230
 1015 0140 B823     		movs	r3, #184
 1016 0142 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1017              		.loc 1 25 2 is_stmt 1 view .LVU231
 1018 0146 0022     		movs	r2, #0
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 24


 1019 0148 0421     		movs	r1, #4
 1020 014a 2046     		mov	r0, r4
 1021 014c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1022              	.LVL102:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1023              		.loc 1 26 2 view .LVU232
 1024 0150 6423     		movs	r3, #100
 1025 0152 0122     		movs	r2, #1
 1026 0154 0DF10601 		add	r1, sp, #6
 1027 0158 2846     		mov	r0, r5
 1028 015a FFF7FEFF 		bl	HAL_SPI_Transmit
 1029              	.LVL103:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1030              		.loc 1 27 2 view .LVU233
 1031 015e 6423     		movs	r3, #100
 1032 0160 0122     		movs	r2, #1
 1033 0162 0DF10701 		add	r1, sp, #7
 1034 0166 2846     		mov	r0, r5
 1035 0168 FFF7FEFF 		bl	HAL_SPI_Receive
 1036              	.LVL104:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1037              		.loc 1 28 2 view .LVU234
 1038 016c 0122     		movs	r2, #1
 1039 016e 0421     		movs	r1, #4
 1040 0170 2046     		mov	r0, r4
 1041 0172 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1042              	.LVL105:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1043              		.loc 1 29 2 view .LVU235
  29:Core/Src/HardWare/ICM_20648.c **** }
 1044              		.loc 1 29 2 is_stmt 0 view .LVU236
 1045              	.LBE29:
 1046              	.LBE28:
 1047              		.loc 1 186 53 view .LVU237
 1048 0176 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1049              		.loc 1 186 40 view .LVU238
 1050 017a 3343     		orrs	r3, r3, r6
 1051 017c 1BB2     		sxth	r3, r3
 1052              		.loc 1 186 5 view .LVU239
 1053 017e 064A     		ldr	r2, .L33+16
 1054 0180 1380     		strh	r3, [r2]	@ movhi
 187:Core/Src/HardWare/ICM_20648.c **** }
 1055              		.loc 1 187 1 view .LVU240
 1056 0182 02B0     		add	sp, sp, #8
 1057              	.LCFI21:
 1058              		.cfi_def_cfa_offset 16
 1059              		@ sp needed
 1060 0184 70BD     		pop	{r4, r5, r6, pc}
 1061              	.L34:
 1062 0186 00BF     		.align	2
 1063              	.L33:
 1064 0188 000C0240 		.word	1073875968
 1065 018c 00000000 		.word	hspi3
 1066 0190 00000000 		.word	.LANCHOR3
 1067 0194 00000000 		.word	.LANCHOR4
 1068 0198 00000000 		.word	.LANCHOR5
 1069              		.cfi_endproc
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 25


 1070              	.LFE245:
 1072              		.section	.text.read_zg_data,"ax",%progbits
 1073              		.align	1
 1074              		.global	read_zg_data
 1075              		.syntax unified
 1076              		.thumb
 1077              		.thumb_func
 1079              	read_zg_data:
 1080              	.LFB246:
 188:Core/Src/HardWare/ICM_20648.c **** void read_zg_data()
 189:Core/Src/HardWare/ICM_20648.c **** {
 1081              		.loc 1 189 1 is_stmt 1 view -0
 1082              		.cfi_startproc
 1083              		@ args = 0, pretend = 0, frame = 8
 1084              		@ frame_needed = 0, uses_anonymous_args = 0
 1085 0000 70B5     		push	{r4, r5, r6, lr}
 1086              	.LCFI22:
 1087              		.cfi_def_cfa_offset 16
 1088              		.cfi_offset 4, -16
 1089              		.cfi_offset 5, -12
 1090              		.cfi_offset 6, -8
 1091              		.cfi_offset 14, -4
 1092 0002 82B0     		sub	sp, sp, #8
 1093              	.LCFI23:
 1094              		.cfi_def_cfa_offset 24
 190:Core/Src/HardWare/ICM_20648.c **** 	zg = ((uint16_t)read_byte(0x37) << 8) | ((uint16_t)read_byte(0x38));
 1095              		.loc 1 190 2 view .LVU242
 1096              	.LVL106:
 1097              	.LBB34:
 1098              	.LBI34:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1099              		.loc 1 20 16 view .LVU243
 1100              	.LBB35:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1101              		.loc 1 22 2 view .LVU244
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1102              		.loc 1 24 2 view .LVU245
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1103              		.loc 1 24 6 is_stmt 0 view .LVU246
 1104 0004 B723     		movs	r3, #183
 1105 0006 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1106              		.loc 1 25 2 is_stmt 1 view .LVU247
 1107 000a 204C     		ldr	r4, .L37
 1108 000c 0022     		movs	r2, #0
 1109 000e 0421     		movs	r1, #4
 1110 0010 2046     		mov	r0, r4
 1111 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1112              	.LVL107:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1113              		.loc 1 26 2 view .LVU248
 1114 0016 1E4D     		ldr	r5, .L37+4
 1115 0018 6423     		movs	r3, #100
 1116 001a 0122     		movs	r2, #1
 1117 001c 0DF10601 		add	r1, sp, #6
 1118 0020 2846     		mov	r0, r5
 1119 0022 FFF7FEFF 		bl	HAL_SPI_Transmit
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 26


 1120              	.LVL108:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1121              		.loc 1 27 2 view .LVU249
 1122 0026 6423     		movs	r3, #100
 1123 0028 0122     		movs	r2, #1
 1124 002a 0DF10701 		add	r1, sp, #7
 1125 002e 2846     		mov	r0, r5
 1126 0030 FFF7FEFF 		bl	HAL_SPI_Receive
 1127              	.LVL109:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1128              		.loc 1 28 2 view .LVU250
 1129 0034 0122     		movs	r2, #1
 1130 0036 0421     		movs	r1, #4
 1131 0038 2046     		mov	r0, r4
 1132 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1133              	.LVL110:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1134              		.loc 1 29 2 view .LVU251
  29:Core/Src/HardWare/ICM_20648.c **** }
 1135              		.loc 1 29 9 is_stmt 0 view .LVU252
 1136 003e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1137              	.LVL111:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1138              		.loc 1 29 9 view .LVU253
 1139              	.LBE35:
 1140              	.LBE34:
 1141              		.loc 1 190 34 view .LVU254
 1142 0042 1E02     		lsls	r6, r3, #8
 1143              	.LVL112:
 1144              	.LBB36:
 1145              	.LBI36:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1146              		.loc 1 20 16 is_stmt 1 view .LVU255
 1147              	.LBB37:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1148              		.loc 1 22 2 view .LVU256
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1149              		.loc 1 24 2 view .LVU257
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1150              		.loc 1 24 6 is_stmt 0 view .LVU258
 1151 0044 B823     		movs	r3, #184
 1152 0046 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1153              		.loc 1 25 2 is_stmt 1 view .LVU259
 1154 004a 0022     		movs	r2, #0
 1155 004c 0421     		movs	r1, #4
 1156 004e 2046     		mov	r0, r4
 1157 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1158              	.LVL113:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1159              		.loc 1 26 2 view .LVU260
 1160 0054 6423     		movs	r3, #100
 1161 0056 0122     		movs	r2, #1
 1162 0058 0DF10601 		add	r1, sp, #6
 1163 005c 2846     		mov	r0, r5
 1164 005e FFF7FEFF 		bl	HAL_SPI_Transmit
 1165              	.LVL114:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 27


  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1166              		.loc 1 27 2 view .LVU261
 1167 0062 6423     		movs	r3, #100
 1168 0064 0122     		movs	r2, #1
 1169 0066 0DF10701 		add	r1, sp, #7
 1170 006a 2846     		mov	r0, r5
 1171 006c FFF7FEFF 		bl	HAL_SPI_Receive
 1172              	.LVL115:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1173              		.loc 1 28 2 view .LVU262
 1174 0070 0122     		movs	r2, #1
 1175 0072 0421     		movs	r1, #4
 1176 0074 2046     		mov	r0, r4
 1177 0076 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1178              	.LVL116:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1179              		.loc 1 29 2 view .LVU263
  29:Core/Src/HardWare/ICM_20648.c **** }
 1180              		.loc 1 29 2 is_stmt 0 view .LVU264
 1181              	.LBE37:
 1182              	.LBE36:
 1183              		.loc 1 190 53 view .LVU265
 1184 007a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1185              		.loc 1 190 40 view .LVU266
 1186 007e 3343     		orrs	r3, r3, r6
 1187 0080 1BB2     		sxth	r3, r3
 1188              		.loc 1 190 5 view .LVU267
 1189 0082 044A     		ldr	r2, .L37+8
 1190 0084 1380     		strh	r3, [r2]	@ movhi
 191:Core/Src/HardWare/ICM_20648.c **** }
 1191              		.loc 1 191 1 view .LVU268
 1192 0086 02B0     		add	sp, sp, #8
 1193              	.LCFI24:
 1194              		.cfi_def_cfa_offset 16
 1195              		@ sp needed
 1196 0088 70BD     		pop	{r4, r5, r6, pc}
 1197              	.L38:
 1198 008a 00BF     		.align	2
 1199              	.L37:
 1200 008c 000C0240 		.word	1073875968
 1201 0090 00000000 		.word	hspi3
 1202 0094 00000000 		.word	.LANCHOR5
 1203              		.cfi_endproc
 1204              	.LFE246:
 1206              		.section	.text.read_accel_data,"ax",%progbits
 1207              		.align	1
 1208              		.global	read_accel_data
 1209              		.syntax unified
 1210              		.thumb
 1211              		.thumb_func
 1213              	read_accel_data:
 1214              	.LFB247:
 192:Core/Src/HardWare/ICM_20648.c **** 
 193:Core/Src/HardWare/ICM_20648.c **** void read_accel_data() {
 1215              		.loc 1 193 24 is_stmt 1 view -0
 1216              		.cfi_startproc
 1217              		@ args = 0, pretend = 0, frame = 8
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 28


 1218              		@ frame_needed = 0, uses_anonymous_args = 0
 1219 0000 70B5     		push	{r4, r5, r6, lr}
 1220              	.LCFI25:
 1221              		.cfi_def_cfa_offset 16
 1222              		.cfi_offset 4, -16
 1223              		.cfi_offset 5, -12
 1224              		.cfi_offset 6, -8
 1225              		.cfi_offset 14, -4
 1226 0002 82B0     		sub	sp, sp, #8
 1227              	.LCFI26:
 1228              		.cfi_def_cfa_offset 24
 194:Core/Src/HardWare/ICM_20648.c **** 
 195:Core/Src/HardWare/ICM_20648.c **** 	xa = ((uint16_t)read_byte(0x2D) << 8) | ((uint16_t)read_byte(0x2E));
 1229              		.loc 1 195 2 view .LVU270
 1230              	.LVL117:
 1231              	.LBB50:
 1232              	.LBI50:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1233              		.loc 1 20 16 view .LVU271
 1234              	.LBB51:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1235              		.loc 1 22 2 view .LVU272
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1236              		.loc 1 24 2 view .LVU273
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1237              		.loc 1 24 6 is_stmt 0 view .LVU274
 1238 0004 AD23     		movs	r3, #173
 1239 0006 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1240              		.loc 1 25 2 is_stmt 1 view .LVU275
 1241 000a 5F4C     		ldr	r4, .L41
 1242 000c 0022     		movs	r2, #0
 1243 000e 0421     		movs	r1, #4
 1244 0010 2046     		mov	r0, r4
 1245 0012 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1246              	.LVL118:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1247              		.loc 1 26 2 view .LVU276
 1248 0016 5D4D     		ldr	r5, .L41+4
 1249 0018 6423     		movs	r3, #100
 1250 001a 0122     		movs	r2, #1
 1251 001c 0DF10601 		add	r1, sp, #6
 1252 0020 2846     		mov	r0, r5
 1253 0022 FFF7FEFF 		bl	HAL_SPI_Transmit
 1254              	.LVL119:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1255              		.loc 1 27 2 view .LVU277
 1256 0026 6423     		movs	r3, #100
 1257 0028 0122     		movs	r2, #1
 1258 002a 0DF10701 		add	r1, sp, #7
 1259 002e 2846     		mov	r0, r5
 1260 0030 FFF7FEFF 		bl	HAL_SPI_Receive
 1261              	.LVL120:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1262              		.loc 1 28 2 view .LVU278
 1263 0034 0122     		movs	r2, #1
 1264 0036 0421     		movs	r1, #4
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 29


 1265 0038 2046     		mov	r0, r4
 1266 003a FFF7FEFF 		bl	HAL_GPIO_WritePin
 1267              	.LVL121:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1268              		.loc 1 29 2 view .LVU279
  29:Core/Src/HardWare/ICM_20648.c **** }
 1269              		.loc 1 29 9 is_stmt 0 view .LVU280
 1270 003e 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1271              	.LVL122:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1272              		.loc 1 29 9 view .LVU281
 1273              	.LBE51:
 1274              	.LBE50:
 1275              		.loc 1 195 34 view .LVU282
 1276 0042 1E02     		lsls	r6, r3, #8
 1277              	.LVL123:
 1278              	.LBB52:
 1279              	.LBI52:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1280              		.loc 1 20 16 is_stmt 1 view .LVU283
 1281              	.LBB53:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1282              		.loc 1 22 2 view .LVU284
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1283              		.loc 1 24 2 view .LVU285
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1284              		.loc 1 24 6 is_stmt 0 view .LVU286
 1285 0044 AE23     		movs	r3, #174
 1286 0046 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1287              		.loc 1 25 2 is_stmt 1 view .LVU287
 1288 004a 0022     		movs	r2, #0
 1289 004c 0421     		movs	r1, #4
 1290 004e 2046     		mov	r0, r4
 1291 0050 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1292              	.LVL124:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1293              		.loc 1 26 2 view .LVU288
 1294 0054 6423     		movs	r3, #100
 1295 0056 0122     		movs	r2, #1
 1296 0058 0DF10601 		add	r1, sp, #6
 1297 005c 2846     		mov	r0, r5
 1298 005e FFF7FEFF 		bl	HAL_SPI_Transmit
 1299              	.LVL125:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1300              		.loc 1 27 2 view .LVU289
 1301 0062 6423     		movs	r3, #100
 1302 0064 0122     		movs	r2, #1
 1303 0066 0DF10701 		add	r1, sp, #7
 1304 006a 2846     		mov	r0, r5
 1305 006c FFF7FEFF 		bl	HAL_SPI_Receive
 1306              	.LVL126:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1307              		.loc 1 28 2 view .LVU290
 1308 0070 0122     		movs	r2, #1
 1309 0072 0421     		movs	r1, #4
 1310 0074 2046     		mov	r0, r4
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 30


 1311 0076 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1312              	.LVL127:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1313              		.loc 1 29 2 view .LVU291
  29:Core/Src/HardWare/ICM_20648.c **** }
 1314              		.loc 1 29 2 is_stmt 0 view .LVU292
 1315              	.LBE53:
 1316              	.LBE52:
 1317              		.loc 1 195 53 view .LVU293
 1318 007a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1319              		.loc 1 195 40 view .LVU294
 1320 007e 3343     		orrs	r3, r3, r6
 1321 0080 1BB2     		sxth	r3, r3
 1322              		.loc 1 195 5 view .LVU295
 1323 0082 434A     		ldr	r2, .L41+8
 1324 0084 1380     		strh	r3, [r2]	@ movhi
 196:Core/Src/HardWare/ICM_20648.c **** 	ya = ((uint16_t)read_byte(0x2F) << 8) | ((uint16_t)read_byte(0x30));
 1325              		.loc 1 196 2 is_stmt 1 view .LVU296
 1326              	.LVL128:
 1327              	.LBB54:
 1328              	.LBI54:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1329              		.loc 1 20 16 view .LVU297
 1330              	.LBB55:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1331              		.loc 1 22 2 view .LVU298
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1332              		.loc 1 24 2 view .LVU299
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1333              		.loc 1 24 6 is_stmt 0 view .LVU300
 1334 0086 AF23     		movs	r3, #175
 1335 0088 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1336              		.loc 1 25 2 is_stmt 1 view .LVU301
 1337 008c 0022     		movs	r2, #0
 1338 008e 0421     		movs	r1, #4
 1339 0090 2046     		mov	r0, r4
 1340 0092 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1341              	.LVL129:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1342              		.loc 1 26 2 view .LVU302
 1343 0096 6423     		movs	r3, #100
 1344 0098 0122     		movs	r2, #1
 1345 009a 0DF10601 		add	r1, sp, #6
 1346 009e 2846     		mov	r0, r5
 1347 00a0 FFF7FEFF 		bl	HAL_SPI_Transmit
 1348              	.LVL130:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1349              		.loc 1 27 2 view .LVU303
 1350 00a4 6423     		movs	r3, #100
 1351 00a6 0122     		movs	r2, #1
 1352 00a8 0DF10701 		add	r1, sp, #7
 1353 00ac 2846     		mov	r0, r5
 1354 00ae FFF7FEFF 		bl	HAL_SPI_Receive
 1355              	.LVL131:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1356              		.loc 1 28 2 view .LVU304
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 31


 1357 00b2 0122     		movs	r2, #1
 1358 00b4 0421     		movs	r1, #4
 1359 00b6 2046     		mov	r0, r4
 1360 00b8 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1361              	.LVL132:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1362              		.loc 1 29 2 view .LVU305
  29:Core/Src/HardWare/ICM_20648.c **** }
 1363              		.loc 1 29 9 is_stmt 0 view .LVU306
 1364 00bc 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1365              	.LVL133:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1366              		.loc 1 29 9 view .LVU307
 1367              	.LBE55:
 1368              	.LBE54:
 1369              		.loc 1 196 34 view .LVU308
 1370 00c0 1E02     		lsls	r6, r3, #8
 1371              	.LVL134:
 1372              	.LBB56:
 1373              	.LBI56:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1374              		.loc 1 20 16 is_stmt 1 view .LVU309
 1375              	.LBB57:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1376              		.loc 1 22 2 view .LVU310
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1377              		.loc 1 24 2 view .LVU311
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1378              		.loc 1 24 6 is_stmt 0 view .LVU312
 1379 00c2 B023     		movs	r3, #176
 1380 00c4 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1381              		.loc 1 25 2 is_stmt 1 view .LVU313
 1382 00c8 0022     		movs	r2, #0
 1383 00ca 0421     		movs	r1, #4
 1384 00cc 2046     		mov	r0, r4
 1385 00ce FFF7FEFF 		bl	HAL_GPIO_WritePin
 1386              	.LVL135:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1387              		.loc 1 26 2 view .LVU314
 1388 00d2 6423     		movs	r3, #100
 1389 00d4 0122     		movs	r2, #1
 1390 00d6 0DF10601 		add	r1, sp, #6
 1391 00da 2846     		mov	r0, r5
 1392 00dc FFF7FEFF 		bl	HAL_SPI_Transmit
 1393              	.LVL136:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1394              		.loc 1 27 2 view .LVU315
 1395 00e0 6423     		movs	r3, #100
 1396 00e2 0122     		movs	r2, #1
 1397 00e4 0DF10701 		add	r1, sp, #7
 1398 00e8 2846     		mov	r0, r5
 1399 00ea FFF7FEFF 		bl	HAL_SPI_Receive
 1400              	.LVL137:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1401              		.loc 1 28 2 view .LVU316
 1402 00ee 0122     		movs	r2, #1
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 32


 1403 00f0 0421     		movs	r1, #4
 1404 00f2 2046     		mov	r0, r4
 1405 00f4 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1406              	.LVL138:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1407              		.loc 1 29 2 view .LVU317
  29:Core/Src/HardWare/ICM_20648.c **** }
 1408              		.loc 1 29 2 is_stmt 0 view .LVU318
 1409              	.LBE57:
 1410              	.LBE56:
 1411              		.loc 1 196 53 view .LVU319
 1412 00f8 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1413              		.loc 1 196 40 view .LVU320
 1414 00fc 3343     		orrs	r3, r3, r6
 1415 00fe 1BB2     		sxth	r3, r3
 1416              		.loc 1 196 5 view .LVU321
 1417 0100 244A     		ldr	r2, .L41+12
 1418 0102 1380     		strh	r3, [r2]	@ movhi
 197:Core/Src/HardWare/ICM_20648.c **** 	za = ((uint16_t)read_byte(0x31) << 8) | ((uint16_t)read_byte(0x32));
 1419              		.loc 1 197 2 is_stmt 1 view .LVU322
 1420              	.LVL139:
 1421              	.LBB58:
 1422              	.LBI58:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1423              		.loc 1 20 16 view .LVU323
 1424              	.LBB59:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1425              		.loc 1 22 2 view .LVU324
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1426              		.loc 1 24 2 view .LVU325
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1427              		.loc 1 24 6 is_stmt 0 view .LVU326
 1428 0104 B123     		movs	r3, #177
 1429 0106 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1430              		.loc 1 25 2 is_stmt 1 view .LVU327
 1431 010a 0022     		movs	r2, #0
 1432 010c 0421     		movs	r1, #4
 1433 010e 2046     		mov	r0, r4
 1434 0110 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1435              	.LVL140:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1436              		.loc 1 26 2 view .LVU328
 1437 0114 6423     		movs	r3, #100
 1438 0116 0122     		movs	r2, #1
 1439 0118 0DF10601 		add	r1, sp, #6
 1440 011c 2846     		mov	r0, r5
 1441 011e FFF7FEFF 		bl	HAL_SPI_Transmit
 1442              	.LVL141:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1443              		.loc 1 27 2 view .LVU329
 1444 0122 6423     		movs	r3, #100
 1445 0124 0122     		movs	r2, #1
 1446 0126 0DF10701 		add	r1, sp, #7
 1447 012a 2846     		mov	r0, r5
 1448 012c FFF7FEFF 		bl	HAL_SPI_Receive
 1449              	.LVL142:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 33


  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
 1450              		.loc 1 28 2 view .LVU330
 1451 0130 0122     		movs	r2, #1
 1452 0132 0421     		movs	r1, #4
 1453 0134 2046     		mov	r0, r4
 1454 0136 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1455              	.LVL143:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1456              		.loc 1 29 2 view .LVU331
  29:Core/Src/HardWare/ICM_20648.c **** }
 1457              		.loc 1 29 9 is_stmt 0 view .LVU332
 1458 013a 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1459              	.LVL144:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1460              		.loc 1 29 9 view .LVU333
 1461              	.LBE59:
 1462              	.LBE58:
 1463              		.loc 1 197 34 view .LVU334
 1464 013e 1E02     		lsls	r6, r3, #8
 1465              	.LVL145:
 1466              	.LBB60:
 1467              	.LBI60:
  20:Core/Src/HardWare/ICM_20648.c **** 
 1468              		.loc 1 20 16 is_stmt 1 view .LVU335
 1469              	.LBB61:
  22:Core/Src/HardWare/ICM_20648.c **** 
 1470              		.loc 1 22 2 view .LVU336
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1471              		.loc 1 24 2 view .LVU337
  24:Core/Src/HardWare/ICM_20648.c **** 	CS_RESET;
 1472              		.loc 1 24 6 is_stmt 0 view .LVU338
 1473 0140 B223     		movs	r3, #178
 1474 0142 8DF80630 		strb	r3, [sp, #6]
  25:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Transmit(&hspi3,&ret,1,100);
 1475              		.loc 1 25 2 is_stmt 1 view .LVU339
 1476 0146 0022     		movs	r2, #0
 1477 0148 0421     		movs	r1, #4
 1478 014a 2046     		mov	r0, r4
 1479 014c FFF7FEFF 		bl	HAL_GPIO_WritePin
 1480              	.LVL146:
  26:Core/Src/HardWare/ICM_20648.c **** 	HAL_SPI_Receive(&hspi3,&val,1,100);
 1481              		.loc 1 26 2 view .LVU340
 1482 0150 6423     		movs	r3, #100
 1483 0152 0122     		movs	r2, #1
 1484 0154 0DF10601 		add	r1, sp, #6
 1485 0158 2846     		mov	r0, r5
 1486 015a FFF7FEFF 		bl	HAL_SPI_Transmit
 1487              	.LVL147:
  27:Core/Src/HardWare/ICM_20648.c **** 	CS_SET;
 1488              		.loc 1 27 2 view .LVU341
 1489 015e 6423     		movs	r3, #100
 1490 0160 0122     		movs	r2, #1
 1491 0162 0DF10701 		add	r1, sp, #7
 1492 0166 2846     		mov	r0, r5
 1493 0168 FFF7FEFF 		bl	HAL_SPI_Receive
 1494              	.LVL148:
  28:Core/Src/HardWare/ICM_20648.c **** 	return val;
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 34


 1495              		.loc 1 28 2 view .LVU342
 1496 016c 0122     		movs	r2, #1
 1497 016e 0421     		movs	r1, #4
 1498 0170 2046     		mov	r0, r4
 1499 0172 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1500              	.LVL149:
  29:Core/Src/HardWare/ICM_20648.c **** }
 1501              		.loc 1 29 2 view .LVU343
  29:Core/Src/HardWare/ICM_20648.c **** }
 1502              		.loc 1 29 2 is_stmt 0 view .LVU344
 1503              	.LBE61:
 1504              	.LBE60:
 1505              		.loc 1 197 53 view .LVU345
 1506 0176 9DF80730 		ldrb	r3, [sp, #7]	@ zero_extendqisi2
 1507              		.loc 1 197 40 view .LVU346
 1508 017a 3343     		orrs	r3, r3, r6
 1509 017c 1BB2     		sxth	r3, r3
 1510              		.loc 1 197 5 view .LVU347
 1511 017e 064A     		ldr	r2, .L41+16
 1512 0180 1380     		strh	r3, [r2]	@ movhi
 198:Core/Src/HardWare/ICM_20648.c **** }
 1513              		.loc 1 198 1 view .LVU348
 1514 0182 02B0     		add	sp, sp, #8
 1515              	.LCFI27:
 1516              		.cfi_def_cfa_offset 16
 1517              		@ sp needed
 1518 0184 70BD     		pop	{r4, r5, r6, pc}
 1519              	.L42:
 1520 0186 00BF     		.align	2
 1521              	.L41:
 1522 0188 000C0240 		.word	1073875968
 1523 018c 00000000 		.word	hspi3
 1524 0190 00000000 		.word	.LANCHOR6
 1525 0194 00000000 		.word	.LANCHOR7
 1526 0198 00000000 		.word	.LANCHOR8
 1527              		.cfi_endproc
 1528              	.LFE247:
 1530              		.section	.text.IMU_Calib,"ax",%progbits
 1531              		.align	1
 1532              		.global	IMU_Calib
 1533              		.syntax unified
 1534              		.thumb
 1535              		.thumb_func
 1537              	IMU_Calib:
 1538              	.LFB248:
 199:Core/Src/HardWare/ICM_20648.c **** 
 200:Core/Src/HardWare/ICM_20648.c **** void IMU_Calib(){
 1539              		.loc 1 200 17 is_stmt 1 view -0
 1540              		.cfi_startproc
 1541              		@ args = 0, pretend = 0, frame = 8000
 1542              		@ frame_needed = 0, uses_anonymous_args = 0
 1543 0000 10B5     		push	{r4, lr}
 1544              	.LCFI28:
 1545              		.cfi_def_cfa_offset 8
 1546              		.cfi_offset 4, -8
 1547              		.cfi_offset 14, -4
 1548 0002 2DED028B 		vpush.64	{d8}
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 35


 1549              	.LCFI29:
 1550              		.cfi_def_cfa_offset 16
 1551              		.cfi_offset 80, -16
 1552              		.cfi_offset 81, -12
 1553 0006 ADF5FA5D 		sub	sp, sp, #8000
 1554              	.LCFI30:
 1555              		.cfi_def_cfa_offset 8016
 201:Core/Src/HardWare/ICM_20648.c **** 
 202:Core/Src/HardWare/ICM_20648.c **** 
 203:Core/Src/HardWare/ICM_20648.c **** 	HAL_Delay(100);
 1556              		.loc 1 203 2 view .LVU350
 1557 000a 6420     		movs	r0, #100
 1558 000c FFF7FEFF 		bl	HAL_Delay
 1559              	.LVL150:
 204:Core/Src/HardWare/ICM_20648.c **** 
 205:Core/Src/HardWare/ICM_20648.c **** 	int num = 2000;
 1560              		.loc 1 205 2 view .LVU351
 206:Core/Src/HardWare/ICM_20648.c **** 	float zg_vals[2000]={0.0f};
 1561              		.loc 1 206 2 view .LVU352
 1562              		.loc 1 206 8 is_stmt 0 view .LVU353
 1563 0010 4FF4FA52 		mov	r2, #8000
 1564 0014 0021     		movs	r1, #0
 1565 0016 6846     		mov	r0, sp
 1566 0018 FFF7FEFF 		bl	memset
 1567              	.LVL151:
 207:Core/Src/HardWare/ICM_20648.c **** 	float sum=0;
 1568              		.loc 1 207 2 is_stmt 1 view .LVU354
 208:Core/Src/HardWare/ICM_20648.c **** 	for(int i = 0; i < num; i++){
 1569              		.loc 1 208 2 view .LVU355
 1570              	.LBB62:
 1571              		.loc 1 208 6 view .LVU356
 1572              		.loc 1 208 10 is_stmt 0 view .LVU357
 1573 001c 0024     		movs	r4, #0
 1574              	.LBE62:
 207:Core/Src/HardWare/ICM_20648.c **** 	float sum=0;
 1575              		.loc 1 207 8 view .LVU358
 1576 001e 9FED0F8A 		vldr.32	s16, .L47
 1577              	.LBB63:
 1578              		.loc 1 208 2 view .LVU359
 1579 0022 0CE0     		b	.L44
 1580              	.LVL152:
 1581              	.L45:
 209:Core/Src/HardWare/ICM_20648.c **** 		zg_vals[i] = ZGyro;
 1582              		.loc 1 209 3 is_stmt 1 discriminator 3 view .LVU360
 1583              		.loc 1 209 14 is_stmt 0 discriminator 3 view .LVU361
 1584 0024 0E4B     		ldr	r3, .L47+4
 1585 0026 D3ED007A 		vldr.32	s15, [r3]
 1586 002a 0DEB8403 		add	r3, sp, r4, lsl #2
 1587 002e C3ED007A 		vstr.32	s15, [r3]
 210:Core/Src/HardWare/ICM_20648.c **** 		sum += zg_vals[i];
 1588              		.loc 1 210 3 is_stmt 1 discriminator 3 view .LVU362
 1589              		.loc 1 210 7 is_stmt 0 discriminator 3 view .LVU363
 1590 0032 38EE278A 		vadd.f32	s16, s16, s15
 1591              	.LVL153:
 211:Core/Src/HardWare/ICM_20648.c **** 		HAL_Delay(2);
 1592              		.loc 1 211 3 is_stmt 1 discriminator 3 view .LVU364
 1593 0036 0220     		movs	r0, #2
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 36


 1594 0038 FFF7FEFF 		bl	HAL_Delay
 1595              	.LVL154:
 208:Core/Src/HardWare/ICM_20648.c **** 		zg_vals[i] = ZGyro;
 1596              		.loc 1 208 26 discriminator 3 view .LVU365
 208:Core/Src/HardWare/ICM_20648.c **** 		zg_vals[i] = ZGyro;
 1597              		.loc 1 208 27 is_stmt 0 discriminator 3 view .LVU366
 1598 003c 0134     		adds	r4, r4, #1
 1599              	.LVL155:
 1600              	.L44:
 208:Core/Src/HardWare/ICM_20648.c **** 		zg_vals[i] = ZGyro;
 1601              		.loc 1 208 17 is_stmt 1 discriminator 1 view .LVU367
 208:Core/Src/HardWare/ICM_20648.c **** 		zg_vals[i] = ZGyro;
 1602              		.loc 1 208 2 is_stmt 0 discriminator 1 view .LVU368
 1603 003e B4F5FA6F 		cmp	r4, #2000
 1604 0042 EFDB     		blt	.L45
 1605              	.LBE63:
 212:Core/Src/HardWare/ICM_20648.c **** 	}
 213:Core/Src/HardWare/ICM_20648.c **** 	zg_offset = sum / 2000.0f;
 1606              		.loc 1 213 2 is_stmt 1 view .LVU369
 1607              		.loc 1 213 18 is_stmt 0 view .LVU370
 1608 0044 9FED077A 		vldr.32	s14, .L47+8
 1609 0048 C8EE077A 		vdiv.f32	s15, s16, s14
 1610              		.loc 1 213 12 view .LVU371
 1611 004c 064B     		ldr	r3, .L47+12
 1612 004e C3ED007A 		vstr.32	s15, [r3]
 214:Core/Src/HardWare/ICM_20648.c **** }
 1613              		.loc 1 214 1 view .LVU372
 1614 0052 0DF5FA5D 		add	sp, sp, #8000
 1615              	.LCFI31:
 1616              		.cfi_def_cfa_offset 16
 1617              		@ sp needed
 1618 0056 BDEC028B 		vldm	sp!, {d8}
 1619              	.LCFI32:
 1620              		.cfi_restore 80
 1621              		.cfi_restore 81
 1622              		.cfi_def_cfa_offset 8
 1623              	.LVL156:
 1624              		.loc 1 214 1 view .LVU373
 1625 005a 10BD     		pop	{r4, pc}
 1626              	.LVL157:
 1627              	.L48:
 1628              		.loc 1 214 1 view .LVU374
 1629              		.align	2
 1630              	.L47:
 1631 005c 00000000 		.word	0
 1632 0060 00000000 		.word	.LANCHOR2
 1633 0064 0000FA44 		.word	1157234688
 1634 0068 00000000 		.word	.LANCHOR9
 1635              		.cfi_endproc
 1636              	.LFE248:
 1638              		.section	.text.lowpass_filter_double,"ax",%progbits
 1639              		.align	1
 1640              		.global	lowpass_filter_double
 1641              		.syntax unified
 1642              		.thumb
 1643              		.thumb_func
 1645              	lowpass_filter_double:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 37


 1646              	.LVL158:
 1647              	.LFB249:
 215:Core/Src/HardWare/ICM_20648.c **** double lowpass_filter_double(double x, double x0, double r)
 216:Core/Src/HardWare/ICM_20648.c **** {
 1648              		.loc 1 216 1 is_stmt 1 view -0
 1649              		.cfi_startproc
 1650              		@ args = 0, pretend = 0, frame = 0
 1651              		@ frame_needed = 0, uses_anonymous_args = 0
 1652              		.loc 1 216 1 is_stmt 0 view .LVU376
 1653 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 1654              	.LCFI33:
 1655              		.cfi_def_cfa_offset 32
 1656              		.cfi_offset 3, -32
 1657              		.cfi_offset 4, -28
 1658              		.cfi_offset 5, -24
 1659              		.cfi_offset 6, -20
 1660              		.cfi_offset 7, -16
 1661              		.cfi_offset 8, -12
 1662              		.cfi_offset 9, -8
 1663              		.cfi_offset 14, -4
 1664 0004 53EC102B 		vmov	r2, r3, d0
 1665 0008 59EC118B 		vmov	r8, r9, d1
 1666 000c 55EC124B 		vmov	r4, r5, d2
 217:Core/Src/HardWare/ICM_20648.c **** 	return ((r)*(x) + (1.0 - (r))* (x0));
 1667              		.loc 1 217 2 is_stmt 1 view .LVU377
 1668              		.loc 1 217 13 is_stmt 0 view .LVU378
 1669 0010 12EE100A 		vmov	r0, s4	@ int
 1670 0014 2946     		mov	r1, r5
 1671 0016 FFF7FEFF 		bl	__aeabi_dmul
 1672              	.LVL159:
 1673              		.loc 1 217 13 view .LVU379
 1674 001a 0646     		mov	r6, r0
 1675 001c 0F46     		mov	r7, r1
 1676              		.loc 1 217 25 view .LVU380
 1677 001e 2246     		mov	r2, r4
 1678 0020 2B46     		mov	r3, r5
 1679 0022 0020     		movs	r0, #0
 1680 0024 0849     		ldr	r1, .L51
 1681 0026 FFF7FEFF 		bl	__aeabi_dsub
 1682              	.LVL160:
 1683              		.loc 1 217 31 view .LVU381
 1684 002a 4246     		mov	r2, r8
 1685 002c 4B46     		mov	r3, r9
 1686 002e FFF7FEFF 		bl	__aeabi_dmul
 1687              	.LVL161:
 1688 0032 0246     		mov	r2, r0
 1689 0034 0B46     		mov	r3, r1
 1690              		.loc 1 217 18 view .LVU382
 1691 0036 3046     		mov	r0, r6
 1692 0038 3946     		mov	r1, r7
 1693 003a FFF7FEFF 		bl	__aeabi_dadd
 1694              	.LVL162:
 218:Core/Src/HardWare/ICM_20648.c **** }
 1695              		.loc 1 218 1 view .LVU383
 1696 003e 41EC100B 		vmov	d0, r0, r1
 1697 0042 BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 1698              	.LVL163:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 38


 1699              	.L52:
 1700              		.loc 1 218 1 view .LVU384
 1701 0046 00BF     		.align	2
 1702              	.L51:
 1703 0048 0000F03F 		.word	1072693248
 1704              		.cfi_endproc
 1705              	.LFE249:
 1707              		.section	.text.lowpass_filter_float,"ax",%progbits
 1708              		.align	1
 1709              		.global	lowpass_filter_float
 1710              		.syntax unified
 1711              		.thumb
 1712              		.thumb_func
 1714              	lowpass_filter_float:
 1715              	.LVL164:
 1716              	.LFB250:
 219:Core/Src/HardWare/ICM_20648.c **** float lowpass_filter_float(float x, float x0, float r)
 220:Core/Src/HardWare/ICM_20648.c **** {
 1717              		.loc 1 220 1 is_stmt 1 view -0
 1718              		.cfi_startproc
 1719              		@ args = 0, pretend = 0, frame = 0
 1720              		@ frame_needed = 0, uses_anonymous_args = 0
 1721              		.loc 1 220 1 is_stmt 0 view .LVU386
 1722 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1723              	.LCFI34:
 1724              		.cfi_def_cfa_offset 24
 1725              		.cfi_offset 4, -24
 1726              		.cfi_offset 5, -20
 1727              		.cfi_offset 6, -16
 1728              		.cfi_offset 7, -12
 1729              		.cfi_offset 8, -8
 1730              		.cfi_offset 14, -4
 1731 0004 2DED028B 		vpush.64	{d8}
 1732              	.LCFI35:
 1733              		.cfi_def_cfa_offset 32
 1734              		.cfi_offset 80, -32
 1735              		.cfi_offset 81, -28
 1736 0008 10EE908A 		vmov	r8, s1
 1737 000c B0EE418A 		vmov.f32	s16, s2
 221:Core/Src/HardWare/ICM_20648.c **** 	return ((r)*(x) + (1.0 - (r))* (x0));
 1738              		.loc 1 221 2 is_stmt 1 view .LVU387
 1739              		.loc 1 221 13 is_stmt 0 view .LVU388
 1740 0010 61EE007A 		vmul.f32	s15, s2, s0
 1741 0014 17EE900A 		vmov	r0, s15
 1742 0018 FFF7FEFF 		bl	__aeabi_f2d
 1743              	.LVL165:
 1744              		.loc 1 221 13 view .LVU389
 1745 001c 0446     		mov	r4, r0
 1746 001e 0D46     		mov	r5, r1
 1747              		.loc 1 221 25 view .LVU390
 1748 0020 18EE100A 		vmov	r0, s16
 1749 0024 FFF7FEFF 		bl	__aeabi_f2d
 1750              	.LVL166:
 1751 0028 0246     		mov	r2, r0
 1752 002a 0B46     		mov	r3, r1
 1753 002c 0020     		movs	r0, #0
 1754 002e 0D49     		ldr	r1, .L55
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 39


 1755 0030 FFF7FEFF 		bl	__aeabi_dsub
 1756              	.LVL167:
 1757 0034 0646     		mov	r6, r0
 1758 0036 0F46     		mov	r7, r1
 1759              		.loc 1 221 31 view .LVU391
 1760 0038 4046     		mov	r0, r8	@ float
 1761 003a FFF7FEFF 		bl	__aeabi_f2d
 1762              	.LVL168:
 1763 003e 3246     		mov	r2, r6
 1764 0040 3B46     		mov	r3, r7
 1765 0042 FFF7FEFF 		bl	__aeabi_dmul
 1766              	.LVL169:
 1767 0046 0246     		mov	r2, r0
 1768 0048 0B46     		mov	r3, r1
 1769              		.loc 1 221 18 view .LVU392
 1770 004a 2046     		mov	r0, r4
 1771 004c 2946     		mov	r1, r5
 1772 004e FFF7FEFF 		bl	__aeabi_dadd
 1773              	.LVL170:
 1774 0052 FFF7FEFF 		bl	__aeabi_d2f
 1775              	.LVL171:
 222:Core/Src/HardWare/ICM_20648.c **** }
 1776              		.loc 1 222 1 view .LVU393
 1777 0056 00EE100A 		vmov	s0, r0
 1778 005a BDEC028B 		vldm	sp!, {d8}
 1779              	.LCFI36:
 1780              		.cfi_restore 80
 1781              		.cfi_restore 81
 1782              		.cfi_def_cfa_offset 24
 1783              	.LVL172:
 1784              		.loc 1 222 1 view .LVU394
 1785 005e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1786              	.LVL173:
 1787              	.L56:
 1788              		.loc 1 222 1 view .LVU395
 1789 0062 00BF     		.align	2
 1790              	.L55:
 1791 0064 0000F03F 		.word	1072693248
 1792              		.cfi_endproc
 1793              	.LFE250:
 1795              		.global	convert_to_imu_angv
 1796              		.global	ZGFilterd
 1797              		.global	YAccel
 1798              		.global	ZGyro
 1799              		.global	ya_offset
 1800              		.global	zg_offset
 1801              		.global	zg
 1802              		.global	yg
 1803              		.global	xg
 1804              		.global	za
 1805              		.global	ya
 1806              		.global	xa
 1807              		.section	.bss.YAccel,"aw",%nobits
 1808              		.align	2
 1811              	YAccel:
 1812 0000 00000000 		.space	4
 1813              		.section	.bss.ZGFilterd,"aw",%nobits
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 40


 1814              		.align	1
 1815              		.set	.LANCHOR1,. + 0
 1818              	ZGFilterd:
 1819 0000 0000     		.space	2
 1820              		.section	.bss.ZGyro,"aw",%nobits
 1821              		.align	2
 1822              		.set	.LANCHOR2,. + 0
 1825              	ZGyro:
 1826 0000 00000000 		.space	4
 1827              		.section	.bss.filter.0,"aw",%nobits
 1828              		.align	2
 1829              		.set	.LANCHOR0,. + 0
 1832              	filter.0:
 1833 0000 00000000 		.space	6
 1833      0000
 1834              		.section	.bss.xa,"aw",%nobits
 1835              		.align	1
 1836              		.set	.LANCHOR6,. + 0
 1839              	xa:
 1840 0000 0000     		.space	2
 1841              		.section	.bss.xg,"aw",%nobits
 1842              		.align	1
 1843              		.set	.LANCHOR3,. + 0
 1846              	xg:
 1847 0000 0000     		.space	2
 1848              		.section	.bss.ya,"aw",%nobits
 1849              		.align	1
 1850              		.set	.LANCHOR7,. + 0
 1853              	ya:
 1854 0000 0000     		.space	2
 1855              		.section	.bss.ya_offset,"aw",%nobits
 1856              		.align	2
 1859              	ya_offset:
 1860 0000 00000000 		.space	4
 1861              		.section	.bss.yg,"aw",%nobits
 1862              		.align	1
 1863              		.set	.LANCHOR4,. + 0
 1866              	yg:
 1867 0000 0000     		.space	2
 1868              		.section	.bss.za,"aw",%nobits
 1869              		.align	1
 1870              		.set	.LANCHOR8,. + 0
 1873              	za:
 1874 0000 0000     		.space	2
 1875              		.section	.bss.zg,"aw",%nobits
 1876              		.align	1
 1877              		.set	.LANCHOR5,. + 0
 1880              	zg:
 1881 0000 0000     		.space	2
 1882              		.section	.bss.zg_offset,"aw",%nobits
 1883              		.align	2
 1884              		.set	.LANCHOR9,. + 0
 1887              	zg_offset:
 1888 0000 00000000 		.space	4
 1889              		.section	.rodata.convert_to_imu_angv,"a"
 1890              		.align	2
 1893              	convert_to_imu_angv:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 41


 1894 0000 787D8B3A 		.word	982220152
 1895              		.text
 1896              	.Letext0:
 1897              		.file 2 "c:\\tools\\gcc-arm-none-eabi-10_2021.10\\arm-none-eabi\\include\\machine\\_default_types.
 1898              		.file 3 "c:\\tools\\gcc-arm-none-eabi-10_2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 1899              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1900              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1901              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 1902              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1903              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 1904              		.file 9 "Core/Inc/HardWare/ICM_20648.h"
 1905              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 1906              		.file 11 "c:\\tools\\gcc-arm-none-eabi-10_2021.10\\arm-none-eabi\\include\\stdlib.h"
 1907              		.file 12 "<built-in>"
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 42


DEFINED SYMBOLS
                            *ABS*:00000000 ICM_20648.c
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:20     .text.compare_num:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:26     .text.compare_num:00000000 compare_num
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:69     .text.read_byte:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:75     .text.read_byte:00000000 read_byte
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:138    .text.read_byte:00000048 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:144    .text.ReadIMU:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:150    .text.ReadIMU:00000000 ReadIMU
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:270    .text.ReadIMU:00000098 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:276    .text.median_filter:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:282    .text.median_filter:00000000 median_filter
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:348    .text.median_filter:00000044 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:359    .text.Update_IMU:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:365    .text.Update_IMU:00000000 Update_IMU
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:532    .text.Update_IMU:000000e8 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:545    .text.write_byte:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:551    .text.write_byte:00000000 write_byte
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:615    .text.write_byte:00000048 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:621    .text.IMU_init:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:627    .text.IMU_init:00000000 IMU_init
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:743    .text.IMU_init:00000080 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:749    .text.read_gyro_data:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:755    .text.read_gyro_data:00000000 read_gyro_data
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1064   .text.read_gyro_data:00000188 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1073   .text.read_zg_data:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1079   .text.read_zg_data:00000000 read_zg_data
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1200   .text.read_zg_data:0000008c $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1207   .text.read_accel_data:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1213   .text.read_accel_data:00000000 read_accel_data
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1522   .text.read_accel_data:00000188 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1531   .text.IMU_Calib:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1537   .text.IMU_Calib:00000000 IMU_Calib
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1631   .text.IMU_Calib:0000005c $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1639   .text.lowpass_filter_double:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1645   .text.lowpass_filter_double:00000000 lowpass_filter_double
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1703   .text.lowpass_filter_double:00000048 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1708   .text.lowpass_filter_float:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1714   .text.lowpass_filter_float:00000000 lowpass_filter_float
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1791   .text.lowpass_filter_float:00000064 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1893   .rodata.convert_to_imu_angv:00000000 convert_to_imu_angv
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1818   .bss.ZGFilterd:00000000 ZGFilterd
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1811   .bss.YAccel:00000000 YAccel
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1825   .bss.ZGyro:00000000 ZGyro
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1859   .bss.ya_offset:00000000 ya_offset
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1887   .bss.zg_offset:00000000 zg_offset
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1880   .bss.zg:00000000 zg
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1866   .bss.yg:00000000 yg
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1846   .bss.xg:00000000 xg
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1873   .bss.za:00000000 za
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1853   .bss.ya:00000000 ya
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1839   .bss.xa:00000000 xa
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1808   .bss.YAccel:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1814   .bss.ZGFilterd:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1821   .bss.ZGyro:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1828   .bss.filter.0:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1832   .bss.filter.0:00000000 filter.0
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s 			page 43


C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1835   .bss.xa:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1842   .bss.xg:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1849   .bss.ya:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1856   .bss.ya_offset:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1862   .bss.yg:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1869   .bss.za:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1876   .bss.zg:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1883   .bss.zg_offset:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccnq2JRC.s:1890   .rodata.convert_to_imu_angv:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
HAL_SPI_Receive
hspi3
qsort
__aeabi_f2d
__aeabi_dmul
__aeabi_dsub
__aeabi_dadd
__aeabi_d2f
HAL_Delay
memset
