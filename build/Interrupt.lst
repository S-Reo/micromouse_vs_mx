ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"Interrupt.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	__aeabi_f2d
  20              		.global	__aeabi_dmul
  21              		.global	__aeabi_d2f
  22              		.section	.text.Explore_IT,"ax",%progbits
  23              		.align	1
  24              		.syntax unified
  25              		.thumb
  26              		.thumb_func
  28              	Explore_IT:
  29              	.LFB238:
  30              		.file 1 "Core/Src/Main/Interrupt.c"
   1:Core/Src/Main/Interrupt.c **** /*
   2:Core/Src/Main/Interrupt.c ****  * Interrupt.c
   3:Core/Src/Main/Interrupt.c ****  *
   4:Core/Src/Main/Interrupt.c ****  *  Created on: 2022/02/15
   5:Core/Src/Main/Interrupt.c ****  *      Author: leopi
   6:Core/Src/Main/Interrupt.c ****  */
   7:Core/Src/Main/Interrupt.c **** #include "Interrupt.h"
   8:Core/Src/Main/Interrupt.c **** 
   9:Core/Src/Main/Interrupt.c **** #include "Action.h"
  10:Core/Src/Main/Interrupt.c **** #include "MicroMouse.h"
  11:Core/Src/Main/Interrupt.c **** 
  12:Core/Src/Main/Interrupt.c **** #include <math.h>
  13:Core/Src/Main/Interrupt.c **** #include "Convert.h"
  14:Core/Src/Main/Interrupt.c **** #include "PID_Control.h"
  15:Core/Src/Main/Interrupt.c **** 
  16:Core/Src/Main/Interrupt.c **** #include "mouse_ADC.h"
  17:Core/Src/Main/Interrupt.c **** //#include "LED_Driver.h"
  18:Core/Src/Main/Interrupt.c **** #include "IR_Emitter.h"
  19:Core/Src/Main/Interrupt.c **** #include "Motor_Driver.h"
  20:Core/Src/Main/Interrupt.c **** #include "ICM_20648.h"
  21:Core/Src/Main/Interrupt.c **** #include "Mode.h"
  22:Core/Src/Main/Interrupt.c **** // #include "Sampling.h"
  23:Core/Src/Main/Interrupt.c **** 
  24:Core/Src/Main/Interrupt.c **** int timer1,timer8, t;
  25:Core/Src/Main/Interrupt.c **** int IT_mode;
  26:Core/Src/Main/Interrupt.c **** int velodebug_flag=0;
  27:Core/Src/Main/Interrupt.c **** float debugVL[2000]={0};
  28:Core/Src/Main/Interrupt.c **** float debugVR[2000] = {0};
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 2


  29:Core/Src/Main/Interrupt.c **** int dbc = 0;
  30:Core/Src/Main/Interrupt.c **** 
  31:Core/Src/Main/Interrupt.c **** 
  32:Core/Src/Main/Interrupt.c **** const float convert_to_velocity = MM_PER_PULSE/T1;
  33:Core/Src/Main/Interrupt.c **** const float convert_to_angularv = 1/TREAD_WIDTH;
  34:Core/Src/Main/Interrupt.c **** //const float convert_to_imu_angv = M_PI/(16.4f*180.0f);
  35:Core/Src/Main/Interrupt.c **** const float convert_to_imu_yaccel = 1000*9.80392157f / 2048.0f; //1000*ãªã‚“ã¡ã‚ƒã‚‰gÃ—9.80392157
  36:Core/Src/Main/Interrupt.c **** 
  37:Core/Src/Main/Interrupt.c **** logger_f log_velocity;
  38:Core/Src/Main/Interrupt.c **** 
  39:Core/Src/Main/Interrupt.c **** static void Explore_IT()
  40:Core/Src/Main/Interrupt.c **** {
  31              		.loc 1 40 1 view -0
  32              		.cfi_startproc
  33              		@ args = 0, pretend = 0, frame = 0
  34              		@ frame_needed = 0, uses_anonymous_args = 0
  35 0000 70B5     		push	{r4, r5, r6, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 16
  38              		.cfi_offset 4, -16
  39              		.cfi_offset 5, -12
  40              		.cfi_offset 6, -8
  41              		.cfi_offset 14, -4
  41:Core/Src/Main/Interrupt.c **** 	PulseDisplacement[LEFT] = - (TIM3->CNT - INITIAL_PULSE);
  42              		.loc 1 41 2 view .LVU1
  43              		.loc 1 41 35 is_stmt 0 view .LVU2
  44 0002 9D4B     		ldr	r3, .L13+8
  45 0004 5A6A     		ldr	r2, [r3, #36]
  46              		.loc 1 41 28 view .LVU3
  47 0006 47F22F51 		movw	r1, #29999
  48 000a 8A1A     		subs	r2, r1, r2
  49              		.loc 1 41 26 view .LVU4
  50 000c 9B4C     		ldr	r4, .L13+12
  51 000e 2260     		str	r2, [r4]
  42:Core/Src/Main/Interrupt.c **** 	TIM3->CNT = INITIAL_PULSE;
  52              		.loc 1 42 2 is_stmt 1 view .LVU5
  53              		.loc 1 42 12 is_stmt 0 view .LVU6
  54 0010 5962     		str	r1, [r3, #36]
  43:Core/Src/Main/Interrupt.c **** 	PulseDisplacement[RIGHT] = - (TIM4->CNT - INITIAL_PULSE);
  55              		.loc 1 43 2 is_stmt 1 view .LVU7
  56              		.loc 1 43 36 is_stmt 0 view .LVU8
  57 0012 9B48     		ldr	r0, .L13+16
  58 0014 436A     		ldr	r3, [r0, #36]
  59              		.loc 1 43 29 view .LVU9
  60 0016 CB1A     		subs	r3, r1, r3
  61              		.loc 1 43 27 view .LVU10
  62 0018 6360     		str	r3, [r4, #4]
  44:Core/Src/Main/Interrupt.c **** 	TIM4->CNT = INITIAL_PULSE;
  63              		.loc 1 44 2 is_stmt 1 view .LVU11
  64              		.loc 1 44 12 is_stmt 0 view .LVU12
  65 001a 4162     		str	r1, [r0, #36]
  45:Core/Src/Main/Interrupt.c **** 
  46:Core/Src/Main/Interrupt.c **** 	//é€Ÿåº¦ mm/s
  47:Core/Src/Main/Interrupt.c **** 	CurrentVelocity[LEFT] =  (float)PulseDisplacement[LEFT] * convert_to_velocity;
  66              		.loc 1 47 2 is_stmt 1 view .LVU13
  67              		.loc 1 47 27 is_stmt 0 view .LVU14
  68 001c 07EE902A 		vmov	s15, r2	@ int
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 3


  69 0020 B8EEE77A 		vcvt.f32.s32	s14, s15
  70              		.loc 1 47 58 view .LVU15
  71 0024 DFED976A 		vldr.32	s13, .L13+20
  72 0028 27EE267A 		vmul.f32	s14, s14, s13
  73              		.loc 1 47 24 view .LVU16
  74 002c 964A     		ldr	r2, .L13+24
  75 002e 82ED007A 		vstr.32	s14, [r2]
  48:Core/Src/Main/Interrupt.c **** 	CurrentVelocity[RIGHT] =  (float)PulseDisplacement[RIGHT] * convert_to_velocity;
  76              		.loc 1 48 2 is_stmt 1 view .LVU17
  77              		.loc 1 48 28 is_stmt 0 view .LVU18
  78 0032 07EE903A 		vmov	s15, r3	@ int
  79 0036 F8EEE77A 		vcvt.f32.s32	s15, s15
  80              		.loc 1 48 60 view .LVU19
  81 003a 67EEA67A 		vmul.f32	s15, s15, s13
  82              		.loc 1 48 25 view .LVU20
  83 003e C2ED017A 		vstr.32	s15, [r2, #4]
  49:Core/Src/Main/Interrupt.c **** 	CurrentVelocity[BODY] = (CurrentVelocity[LEFT] + CurrentVelocity[RIGHT] )*0.5f;
  84              		.loc 1 49 2 is_stmt 1 view .LVU21
  85              		.loc 1 49 42 is_stmt 0 view .LVU22
  86 0042 D2ED007A 		vldr.32	s15, [r2]
  87              		.loc 1 49 66 view .LVU23
  88 0046 92ED017A 		vldr.32	s14, [r2, #4]
  89              		.loc 1 49 49 view .LVU24
  90 004a 77EE877A 		vadd.f32	s15, s15, s14
  91              		.loc 1 49 75 view .LVU25
  92 004e B6EE007A 		vmov.f32	s14, #5.0e-1
  93 0052 67EE877A 		vmul.f32	s15, s15, s14
  94              		.loc 1 49 24 view .LVU26
  95 0056 C2ED027A 		vstr.32	s15, [r2, #8]
  50:Core/Src/Main/Interrupt.c **** 	getFloatLog(&log_velocity, CurrentVelocity[LEFT]);
  96              		.loc 1 50 2 is_stmt 1 view .LVU27
  97 005a 92ED000A 		vldr.32	s0, [r2]
  98 005e 8B48     		ldr	r0, .L13+28
  99 0060 FFF7FEFF 		bl	getFloatLog
 100              	.LVL0:
  51:Core/Src/Main/Interrupt.c **** 	//ç§»å‹•é‡ mm/msã‚’ç©ç®—
  52:Core/Src/Main/Interrupt.c **** 
  53:Core/Src/Main/Interrupt.c **** 	TotalPulse[LEFT] += PulseDisplacement[LEFT];
 101              		.loc 1 53 2 view .LVU28
 102              		.loc 1 53 19 is_stmt 0 view .LVU29
 103 0064 8A4B     		ldr	r3, .L13+32
 104 0066 1A68     		ldr	r2, [r3]
 105              		.loc 1 53 39 view .LVU30
 106 0068 2168     		ldr	r1, [r4]
 107              		.loc 1 53 19 view .LVU31
 108 006a 0A44     		add	r2, r2, r1
 109 006c 1A60     		str	r2, [r3]
  54:Core/Src/Main/Interrupt.c **** 	TotalPulse[RIGHT] += PulseDisplacement[RIGHT];
 110              		.loc 1 54 2 is_stmt 1 view .LVU32
 111              		.loc 1 54 20 is_stmt 0 view .LVU33
 112 006e 5A68     		ldr	r2, [r3, #4]
 113              		.loc 1 54 40 view .LVU34
 114 0070 6168     		ldr	r1, [r4, #4]
 115              		.loc 1 54 20 view .LVU35
 116 0072 0A44     		add	r2, r2, r1
 117 0074 5A60     		str	r2, [r3, #4]
  55:Core/Src/Main/Interrupt.c **** 	TotalPulse[BODY] = TotalPulse[LEFT]+TotalPulse[RIGHT];
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 4


 118              		.loc 1 55 2 is_stmt 1 view .LVU36
 119              		.loc 1 55 31 is_stmt 0 view .LVU37
 120 0076 1A68     		ldr	r2, [r3]
 121              		.loc 1 55 48 view .LVU38
 122 0078 5968     		ldr	r1, [r3, #4]
 123              		.loc 1 55 37 view .LVU39
 124 007a 0A44     		add	r2, r2, r1
 125              		.loc 1 55 19 view .LVU40
 126 007c 9A60     		str	r2, [r3, #8]
  56:Core/Src/Main/Interrupt.c **** 	//è§’é€Ÿåº¦ rad/s
  57:Core/Src/Main/Interrupt.c **** 
  58:Core/Src/Main/Interrupt.c **** #if 0
  59:Core/Src/Main/Interrupt.c **** 	//static float angle=0;
  60:Core/Src/Main/Interrupt.c **** 	volatile static float zg_last=0;
  61:Core/Src/Main/Interrupt.c **** 	volatile float zg_law;
  62:Core/Src/Main/Interrupt.c **** 	//uint8_t zgb,zgf;
  63:Core/Src/Main/Interrupt.c **** 	ZGyro = ReadIMU(0x37, 0x38);
  64:Core/Src/Main/Interrupt.c ****     zg_law =  ( ZGyro - zg_offset )*convert_to_imu_angv;//16.4 * 180;//rad/s or rad/0.001s
  65:Core/Src/Main/Interrupt.c ****     AngularV = -((0.01*zg_law) + (0.99)* (zg_last));
  66:Core/Src/Main/Interrupt.c ****     zg_last = zg_law;
  67:Core/Src/Main/Interrupt.c **** 	Angle += AngularV * T1;
  68:Core/Src/Main/Interrupt.c **** 
  69:Core/Src/Main/Interrupt.c **** #else
  70:Core/Src/Main/Interrupt.c **** 	Update_IMU(&AngularV, &Angle); //ãƒ¡ãƒ‡ã‚£ã‚¢ãƒ³ãƒ•ã‚£ãƒ«ã‚¿ã¨ã‚ªãƒ•ã‚»ãƒƒãƒˆã ã‘ã§ä½•ã¨ã‹ã
 127              		.loc 1 70 2 is_stmt 1 view .LVU41
 128 007e 8549     		ldr	r1, .L13+36
 129 0080 8548     		ldr	r0, .L13+40
 130 0082 FFF7FEFF 		bl	Update_IMU
 131              	.LVL1:
  71:Core/Src/Main/Interrupt.c **** //	AngularV = ( CurrentVelocity[LEFT] - CurrentVelocity[RIGHT] ) *convert_to_angularv;
  72:Core/Src/Main/Interrupt.c **** //	Angle += AngularV * T1;
  73:Core/Src/Main/Interrupt.c **** 
  74:Core/Src/Main/Interrupt.c **** #endif
  75:Core/Src/Main/Interrupt.c **** 	int wall_d =0,wall_l =0,wall_r =0, wall_f=0;
 132              		.loc 1 75 2 view .LVU42
  76:Core/Src/Main/Interrupt.c **** 		int ang_out=0;
 133              		.loc 1 76 3 view .LVU43
  77:Core/Src/Main/Interrupt.c **** #if 1
  78:Core/Src/Main/Interrupt.c **** 
  79:Core/Src/Main/Interrupt.c **** 	if( Pid[A_VELO_PID].flag == 1 )
 134              		.loc 1 79 2 view .LVU44
 135              		.loc 1 79 21 is_stmt 0 view .LVU45
 136 0086 854B     		ldr	r3, .L13+44
 137 0088 9B6A     		ldr	r3, [r3, #40]
 138              		.loc 1 79 4 view .LVU46
 139 008a 012B     		cmp	r3, #1
 140 008c 5BD0     		beq	.L8
  80:Core/Src/Main/Interrupt.c **** 	{
  81:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
  82:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;
  83:Core/Src/Main/Interrupt.c **** 	}
  84:Core/Src/Main/Interrupt.c **** 	else if( Pid[D_WALL_PID].flag == 1 )
 141              		.loc 1 84 7 is_stmt 1 view .LVU47
 142              		.loc 1 84 26 is_stmt 0 view .LVU48
 143 008e 834B     		ldr	r3, .L13+44
 144 0090 5B6D     		ldr	r3, [r3, #84]
 145              		.loc 1 84 9 view .LVU49
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 5


 146 0092 012B     		cmp	r3, #1
 147 0094 68D0     		beq	.L9
  85:Core/Src/Main/Interrupt.c **** 	{
  86:Core/Src/Main/Interrupt.c **** 		wall_d = PIDControl( D_WALL_PID, Photo[SL], Photo[SIDE_R]+PhotoDiff);
  87:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_d*0.001;
  88:Core/Src/Main/Interrupt.c **** 	}
  89:Core/Src/Main/Interrupt.c **** 	else if( Pid[L_WALL_PID].flag == 1 )
 148              		.loc 1 89 7 is_stmt 1 view .LVU50
 149              		.loc 1 89 26 is_stmt 0 view .LVU51
 150 0096 814B     		ldr	r3, .L13+44
 151 0098 D3F88030 		ldr	r3, [r3, #128]
 152              		.loc 1 89 9 view .LVU52
 153 009c 012B     		cmp	r3, #1
 154 009e 00F08280 		beq	.L10
  90:Core/Src/Main/Interrupt.c **** 	{
  91:Core/Src/Main/Interrupt.c **** 		wall_l = PIDControl( L_WALL_PID,  Photo[SL], TargetPhoto[SL]);
  92:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_l*0.001;
  93:Core/Src/Main/Interrupt.c **** 	}
  94:Core/Src/Main/Interrupt.c **** 	else if( Pid[R_WALL_PID].flag == 1 )
 155              		.loc 1 94 7 is_stmt 1 view .LVU53
 156              		.loc 1 94 26 is_stmt 0 view .LVU54
 157 00a2 7E4B     		ldr	r3, .L13+44
 158 00a4 D3F8AC30 		ldr	r3, [r3, #172]
 159              		.loc 1 94 9 view .LVU55
 160 00a8 012B     		cmp	r3, #1
 161 00aa 00F09780 		beq	.L11
  95:Core/Src/Main/Interrupt.c **** 	{
  96:Core/Src/Main/Interrupt.c **** 		wall_r = PIDControl( R_WALL_PID,  TargetPhoto[SIDE_R], Photo[SIDE_R]);
  97:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_r*0.001;
  98:Core/Src/Main/Interrupt.c **** 	}
  99:Core/Src/Main/Interrupt.c **** 	else if( Pid[F_WALL_PID].flag == 1)
 162              		.loc 1 99 7 is_stmt 1 view .LVU56
 163              		.loc 1 99 26 is_stmt 0 view .LVU57
 164 00ae 7B4B     		ldr	r3, .L13+44
 165 00b0 D3F88831 		ldr	r3, [r3, #392]
 166              		.loc 1 99 9 view .LVU58
 167 00b4 012B     		cmp	r3, #1
 168 00b6 00F0AC80 		beq	.L12
 169              	.LVL2:
 170              	.L3:
 100:Core/Src/Main/Interrupt.c **** 	{
 101:Core/Src/Main/Interrupt.c **** 		wall_f = PIDControl( F_WALL_PID,   3800, (	(Photo[FR]+Photo[FL])));
 102:Core/Src/Main/Interrupt.c **** 		TargetVelocity[BODY] = (float)wall_f*0.001;
 103:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
 104:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;
 105:Core/Src/Main/Interrupt.c **** 		//TargetVelocity[BODY] = 0.1*PIDControl( FD_WALL_PID,   Photo[FR]+Photo[FL],4000);
 106:Core/Src/Main/Interrupt.c **** 	}
 107:Core/Src/Main/Interrupt.c **** #else
 108:Core/Src/Main/Interrupt.c **** 	switch(Control_Mode)
 109:Core/Src/Main/Interrupt.c **** 	{
 110:Core/Src/Main/Interrupt.c **** 	case A_VELO_PID:
 111:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( Control_Mode,  TargetAngle, Angle);
 112:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;	//ã²ã¨ã¾ãšã“ã®è¾ºã®å€¤ã®å¾®èª¿æ•´ã¯ç½®ã„ã¦ãŠãã€‚åˆ
 113:Core/Src/Main/Interrupt.c **** 		ChangeLED(7);
 114:Core/Src/Main/Interrupt.c **** 		break;
 115:Core/Src/Main/Interrupt.c **** 	case D_WALL_PID:
 116:Core/Src/Main/Interrupt.c **** 		wall_d = PIDControl( Control_Mode, Photo[SL], Photo[SIDE_R]+PhotoDiff);	//å·¦ã«å¯„ã£ã¦ãŸã‚‰+â
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 6


 117:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_d*0.001;//0.002 ã ã¨é€Ÿã•ã¯ã¡ã‚‡ã†ã©ã„ã„ã‘ã©ç´°ã‹ã•ãŒè
 118:Core/Src/Main/Interrupt.c **** 		ChangeLED(5);
 119:Core/Src/Main/Interrupt.c **** 		break;
 120:Core/Src/Main/Interrupt.c **** 	case L_WALL_PID:
 121:Core/Src/Main/Interrupt.c **** 		wall_l = PIDControl( Control_Mode,  Photo[SL], TargetPhoto[SL]);
 122:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_l*0.001;//0.002 ã ã¨é€Ÿã•ã¯ã¡ã‚‡ã†ã©ã„ã„ã‘ã©ç´°ã‹ã•ãŒè
 123:Core/Src/Main/Interrupt.c **** 		ChangeLED(4);
 124:Core/Src/Main/Interrupt.c **** 		break;
 125:Core/Src/Main/Interrupt.c **** 	case R_WALL_PID :
 126:Core/Src/Main/Interrupt.c **** 		wall_r = PIDControl( Control_Mode,  TargetPhoto[SIDE_R], Photo[SIDE_R]);			//å³ã«å¯„ã£ã¦ãŸã‚
 127:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_r*0.001;//0.002 ã ã¨é€Ÿã•ã¯ã¡ã‚‡ã†ã©ã„ã„ã‘ã©ç´°ã‹ã•ãŒè
 128:Core/Src/Main/Interrupt.c **** 		ChangeLED(1);
 129:Core/Src/Main/Interrupt.c **** 		break;
 130:Core/Src/Main/Interrupt.c **** 	case F_WALL_PID : //å‰å£è£œæ­£ã®ãŸã‚ã®åˆ¶å¾¡. ãƒŸãƒƒã‚¯ã‚¹ã¯ã‚ˆããªã„.
 131:Core/Src/Main/Interrupt.c **** 		wall_f = PIDControl( Control_Mode,   3500, (	(Photo[FR]+Photo[FL])));
 132:Core/Src/Main/Interrupt.c **** 		TargetVelocity[BODY] = (float)wall_f*0.001;
 133:Core/Src/Main/Interrupt.c **** 		ChangeLED(2);
 134:Core/Src/Main/Interrupt.c **** 
 135:Core/Src/Main/Interrupt.c **** 		break;
 136:Core/Src/Main/Interrupt.c **** 	case NOT_CTRL_PID:
 137:Core/Src/Main/Interrupt.c **** 		break;
 138:Core/Src/Main/Interrupt.c **** 	default :
 139:Core/Src/Main/Interrupt.c **** 		break;
 140:Core/Src/Main/Interrupt.c **** 	}
 141:Core/Src/Main/Interrupt.c **** #endif
 142:Core/Src/Main/Interrupt.c **** 	TargetVelocity[BODY] += Acceleration;
 171              		.loc 1 142 2 is_stmt 1 view .LVU59
 172 00ba 794B     		ldr	r3, .L13+48
 173 00bc 93ED007A 		vldr.32	s14, [r3]
 174              		.loc 1 142 23 is_stmt 0 view .LVU60
 175 00c0 784C     		ldr	r4, .L13+52
 176 00c2 D4ED027A 		vldr.32	s15, [r4, #8]
 177 00c6 77EE877A 		vadd.f32	s15, s15, s14
 178 00ca C4ED027A 		vstr.32	s15, [r4, #8]
 143:Core/Src/Main/Interrupt.c **** 	//AngularAcceleration += AngularLeapsity;
 144:Core/Src/Main/Interrupt.c **** 	TargetAngularV += AngularAcceleration;
 179              		.loc 1 144 2 is_stmt 1 view .LVU61
 180 00ce 764B     		ldr	r3, .L13+56
 181 00d0 93ED007A 		vldr.32	s14, [r3]
 182              		.loc 1 144 17 is_stmt 0 view .LVU62
 183 00d4 754B     		ldr	r3, .L13+60
 184 00d6 D3ED007A 		vldr.32	s15, [r3]
 185 00da 77EE877A 		vadd.f32	s15, s15, s14
 186 00de C3ED007A 		vstr.32	s15, [r3]
 145:Core/Src/Main/Interrupt.c **** 	//TargetAngularV += AngularAcceleration;
 146:Core/Src/Main/Interrupt.c **** 	TargetVelocity[RIGHT] = ( TargetVelocity[BODY] - TargetAngularV * TREAD_WIDTH * 0.5f );
 187              		.loc 1 146 2 is_stmt 1 view .LVU63
 188              		.loc 1 146 42 is_stmt 0 view .LVU64
 189 00e2 D4ED026A 		vldr.32	s13, [r4, #8]
 190              		.loc 1 146 66 view .LVU65
 191 00e6 93ED007A 		vldr.32	s14, [r3]
 192 00ea 9FED716A 		vldr.32	s12, .L13+64
 193 00ee 27EE067A 		vmul.f32	s14, s14, s12
 194              		.loc 1 146 80 view .LVU66
 195 00f2 F6EE007A 		vmov.f32	s15, #5.0e-1
 196 00f6 27EE277A 		vmul.f32	s14, s14, s15
 197              		.loc 1 146 49 view .LVU67
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 7


 198 00fa 36EEC77A 		vsub.f32	s14, s13, s14
 199              		.loc 1 146 24 view .LVU68
 200 00fe 84ED017A 		vstr.32	s14, [r4, #4]
 147:Core/Src/Main/Interrupt.c **** 	TargetVelocity[LEFT] = ( TargetAngularV *TREAD_WIDTH ) + TargetVelocity[RIGHT];
 201              		.loc 1 147 2 is_stmt 1 view .LVU69
 202              		.loc 1 147 42 is_stmt 0 view .LVU70
 203 0102 D3ED007A 		vldr.32	s15, [r3]
 204 0106 67EE867A 		vmul.f32	s15, s15, s12
 205              		.loc 1 147 73 view .LVU71
 206 010a 94ED017A 		vldr.32	s14, [r4, #4]
 207              		.loc 1 147 57 view .LVU72
 208 010e 77EE877A 		vadd.f32	s15, s15, s14
 209              		.loc 1 147 23 view .LVU73
 210 0112 C4ED007A 		vstr.32	s15, [r4]
 148:Core/Src/Main/Interrupt.c **** 
 149:Core/Src/Main/Interrupt.c **** 	VelocityLeftOut = PIDControl( L_VELO_PID, TargetVelocity[LEFT], CurrentVelocity[LEFT]);
 211              		.loc 1 149 2 is_stmt 1 view .LVU74
 212              		.loc 1 149 20 is_stmt 0 view .LVU75
 213 0116 94ED000A 		vldr.32	s0, [r4]
 214 011a 5B4E     		ldr	r6, .L13+24
 215 011c D6ED000A 		vldr.32	s1, [r6]
 216 0120 0420     		movs	r0, #4
 217 0122 FFF7FEFF 		bl	PIDControl
 218              	.LVL3:
 219              		.loc 1 149 18 view .LVU76
 220 0126 634D     		ldr	r5, .L13+68
 221 0128 2860     		str	r0, [r5]
 150:Core/Src/Main/Interrupt.c **** 	VelocityRightOut = PIDControl( R_VELO_PID, TargetVelocity[RIGHT], CurrentVelocity[RIGHT]);
 222              		.loc 1 150 2 is_stmt 1 view .LVU77
 223              		.loc 1 150 21 is_stmt 0 view .LVU78
 224 012a 94ED010A 		vldr.32	s0, [r4, #4]
 225 012e D6ED010A 		vldr.32	s1, [r6, #4]
 226 0132 0520     		movs	r0, #5
 227 0134 FFF7FEFF 		bl	PIDControl
 228              	.LVL4:
 229 0138 0146     		mov	r1, r0
 230              		.loc 1 150 19 view .LVU79
 231 013a 5F4B     		ldr	r3, .L13+72
 232 013c 1860     		str	r0, [r3]
 151:Core/Src/Main/Interrupt.c **** 
 152:Core/Src/Main/Interrupt.c **** 	//ãƒ¢ãƒ¼ã‚¿ã«å‡ºåŠ›
 153:Core/Src/Main/Interrupt.c **** 	Motor_Switch( VelocityLeftOut, VelocityRightOut );
 233              		.loc 1 153 2 is_stmt 1 view .LVU80
 234 013e 2868     		ldr	r0, [r5]
 235 0140 FFF7FEFF 		bl	Motor_Switch
 236              	.LVL5:
 154:Core/Src/Main/Interrupt.c **** }
 237              		.loc 1 154 1 is_stmt 0 view .LVU81
 238 0144 70BD     		pop	{r4, r5, r6, pc}
 239              	.LVL6:
 240              	.L8:
  81:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;
 241              		.loc 1 81 3 is_stmt 1 view .LVU82
  81:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;
 242              		.loc 1 81 13 is_stmt 0 view .LVU83
 243 0146 5D4B     		ldr	r3, .L13+76
 244 0148 93ED000A 		vldr.32	s0, [r3]
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 8


 245 014c 514B     		ldr	r3, .L13+36
 246 014e D3ED000A 		vldr.32	s1, [r3]
 247 0152 0020     		movs	r0, #0
 248 0154 FFF7FEFF 		bl	PIDControl
 249              	.LVL7:
 250 0158 07EE900A 		vmov	s15, r0	@ int
 251              	.LVL8:
  82:Core/Src/Main/Interrupt.c **** 	}
 252              		.loc 1 82 3 is_stmt 1 view .LVU84
  82:Core/Src/Main/Interrupt.c **** 	}
 253              		.loc 1 82 20 is_stmt 0 view .LVU85
 254 015c F8EEE77A 		vcvt.f32.s32	s15, s15
  82:Core/Src/Main/Interrupt.c **** 	}
 255              		.loc 1 82 18 view .LVU86
 256 0160 524B     		ldr	r3, .L13+60
 257 0162 C3ED007A 		vstr.32	s15, [r3]
 258 0166 A8E7     		b	.L3
 259              	.LVL9:
 260              	.L9:
  86:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_d*0.001;
 261              		.loc 1 86 3 is_stmt 1 view .LVU87
  86:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_d*0.001;
 262              		.loc 1 86 52 is_stmt 0 view .LVU88
 263 0168 554B     		ldr	r3, .L13+80
 264 016a D3ED010A 		vldr.32	s1, [r3, #4]
  86:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_d*0.001;
 265              		.loc 1 86 12 view .LVU89
 266 016e 554A     		ldr	r2, .L13+84
 267 0170 D2ED007A 		vldr.32	s15, [r2]
 268 0174 70EEA70A 		vadd.f32	s1, s1, s15
 269 0178 93ED020A 		vldr.32	s0, [r3, #8]
 270 017c 0120     		movs	r0, #1
 271 017e FFF7FEFF 		bl	PIDControl
 272              	.LVL10:
 273 0182 07EE900A 		vmov	s15, r0	@ int
 274              	.LVL11:
  87:Core/Src/Main/Interrupt.c **** 	}
 275              		.loc 1 87 3 is_stmt 1 view .LVU90
  87:Core/Src/Main/Interrupt.c **** 	}
 276              		.loc 1 87 20 is_stmt 0 view .LVU91
 277 0186 F8EEE77A 		vcvt.f32.s32	s15, s15
 278 018a 17EE900A 		vmov	r0, s15
 279              	.LVL12:
  87:Core/Src/Main/Interrupt.c **** 	}
 280              		.loc 1 87 20 view .LVU92
 281 018e FFF7FEFF 		bl	__aeabi_f2d
 282              	.LVL13:
  87:Core/Src/Main/Interrupt.c **** 	}
 283              		.loc 1 87 33 view .LVU93
 284 0192 37A3     		adr	r3, .L13
 285 0194 D3E90023 		ldrd	r2, [r3]
 286 0198 FFF7FEFF 		bl	__aeabi_dmul
 287              	.LVL14:
 288 019c FFF7FEFF 		bl	__aeabi_d2f
 289              	.LVL15:
  87:Core/Src/Main/Interrupt.c **** 	}
 290              		.loc 1 87 18 view .LVU94
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 9


 291 01a0 424B     		ldr	r3, .L13+60
 292 01a2 1860     		str	r0, [r3]	@ float
 293 01a4 89E7     		b	.L3
 294              	.LVL16:
 295              	.L10:
  91:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_l*0.001;
 296              		.loc 1 91 3 is_stmt 1 view .LVU95
  91:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_l*0.001;
 297              		.loc 1 91 12 is_stmt 0 view .LVU96
 298 01a6 484B     		ldr	r3, .L13+88
 299 01a8 D3ED020A 		vldr.32	s1, [r3, #8]
 300 01ac 444B     		ldr	r3, .L13+80
 301 01ae 93ED020A 		vldr.32	s0, [r3, #8]
 302 01b2 0220     		movs	r0, #2
 303 01b4 FFF7FEFF 		bl	PIDControl
 304              	.LVL17:
 305 01b8 07EE900A 		vmov	s15, r0	@ int
 306              	.LVL18:
  92:Core/Src/Main/Interrupt.c **** 	}
 307              		.loc 1 92 3 is_stmt 1 view .LVU97
  92:Core/Src/Main/Interrupt.c **** 	}
 308              		.loc 1 92 20 is_stmt 0 view .LVU98
 309 01bc F8EEE77A 		vcvt.f32.s32	s15, s15
 310 01c0 17EE900A 		vmov	r0, s15
 311              	.LVL19:
  92:Core/Src/Main/Interrupt.c **** 	}
 312              		.loc 1 92 20 view .LVU99
 313 01c4 FFF7FEFF 		bl	__aeabi_f2d
 314              	.LVL20:
  92:Core/Src/Main/Interrupt.c **** 	}
 315              		.loc 1 92 33 view .LVU100
 316 01c8 29A3     		adr	r3, .L13
 317 01ca D3E90023 		ldrd	r2, [r3]
 318 01ce FFF7FEFF 		bl	__aeabi_dmul
 319              	.LVL21:
 320 01d2 FFF7FEFF 		bl	__aeabi_d2f
 321              	.LVL22:
  92:Core/Src/Main/Interrupt.c **** 	}
 322              		.loc 1 92 18 view .LVU101
 323 01d6 354B     		ldr	r3, .L13+60
 324 01d8 1860     		str	r0, [r3]	@ float
 325 01da 6EE7     		b	.L3
 326              	.LVL23:
 327              	.L11:
  96:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_r*0.001;
 328              		.loc 1 96 3 is_stmt 1 view .LVU102
  96:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)wall_r*0.001;
 329              		.loc 1 96 12 is_stmt 0 view .LVU103
 330 01dc 3A4B     		ldr	r3, .L13+88
 331 01de 93ED010A 		vldr.32	s0, [r3, #4]
 332 01e2 374B     		ldr	r3, .L13+80
 333 01e4 D3ED010A 		vldr.32	s1, [r3, #4]
 334 01e8 0320     		movs	r0, #3
 335 01ea FFF7FEFF 		bl	PIDControl
 336              	.LVL24:
 337 01ee 07EE900A 		vmov	s15, r0	@ int
 338              	.LVL25:
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 10


  97:Core/Src/Main/Interrupt.c **** 	}
 339              		.loc 1 97 3 is_stmt 1 view .LVU104
  97:Core/Src/Main/Interrupt.c **** 	}
 340              		.loc 1 97 20 is_stmt 0 view .LVU105
 341 01f2 F8EEE77A 		vcvt.f32.s32	s15, s15
 342 01f6 17EE900A 		vmov	r0, s15
 343              	.LVL26:
  97:Core/Src/Main/Interrupt.c **** 	}
 344              		.loc 1 97 20 view .LVU106
 345 01fa FFF7FEFF 		bl	__aeabi_f2d
 346              	.LVL27:
  97:Core/Src/Main/Interrupt.c **** 	}
 347              		.loc 1 97 33 view .LVU107
 348 01fe 1CA3     		adr	r3, .L13
 349 0200 D3E90023 		ldrd	r2, [r3]
 350 0204 FFF7FEFF 		bl	__aeabi_dmul
 351              	.LVL28:
 352 0208 FFF7FEFF 		bl	__aeabi_d2f
 353              	.LVL29:
  97:Core/Src/Main/Interrupt.c **** 	}
 354              		.loc 1 97 18 view .LVU108
 355 020c 274B     		ldr	r3, .L13+60
 356 020e 1860     		str	r0, [r3]	@ float
 357 0210 53E7     		b	.L3
 358              	.LVL30:
 359              	.L12:
 101:Core/Src/Main/Interrupt.c **** 		TargetVelocity[BODY] = (float)wall_f*0.001;
 360              		.loc 1 101 3 is_stmt 1 view .LVU109
 101:Core/Src/Main/Interrupt.c **** 		TargetVelocity[BODY] = (float)wall_f*0.001;
 361              		.loc 1 101 52 is_stmt 0 view .LVU110
 362 0212 2B4B     		ldr	r3, .L13+80
 363 0214 D3ED030A 		vldr.32	s1, [r3, #12]
 101:Core/Src/Main/Interrupt.c **** 		TargetVelocity[BODY] = (float)wall_f*0.001;
 364              		.loc 1 101 62 view .LVU111
 365 0218 D3ED007A 		vldr.32	s15, [r3]
 101:Core/Src/Main/Interrupt.c **** 		TargetVelocity[BODY] = (float)wall_f*0.001;
 366              		.loc 1 101 12 view .LVU112
 367 021c 70EEA70A 		vadd.f32	s1, s1, s15
 368 0220 9FED2A0A 		vldr.32	s0, .L13+92
 369 0224 0820     		movs	r0, #8
 370 0226 FFF7FEFF 		bl	PIDControl
 371              	.LVL31:
 372 022a 07EE900A 		vmov	s15, r0	@ int
 373              	.LVL32:
 102:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
 374              		.loc 1 102 3 is_stmt 1 view .LVU113
 102:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
 375              		.loc 1 102 26 is_stmt 0 view .LVU114
 376 022e F8EEE77A 		vcvt.f32.s32	s15, s15
 377 0232 17EE900A 		vmov	r0, s15
 378              	.LVL33:
 102:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
 379              		.loc 1 102 26 view .LVU115
 380 0236 FFF7FEFF 		bl	__aeabi_f2d
 381              	.LVL34:
 102:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
 382              		.loc 1 102 39 view .LVU116
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 11


 383 023a 0DA3     		adr	r3, .L13
 384 023c D3E90023 		ldrd	r2, [r3]
 385 0240 FFF7FEFF 		bl	__aeabi_dmul
 386              	.LVL35:
 387 0244 FFF7FEFF 		bl	__aeabi_d2f
 388              	.LVL36:
 102:Core/Src/Main/Interrupt.c **** 		ang_out = PIDControl( A_VELO_PID,  TargetAngle, Angle);
 389              		.loc 1 102 24 view .LVU117
 390 0248 164B     		ldr	r3, .L13+52
 391 024a 9860     		str	r0, [r3, #8]	@ float
 103:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;
 392              		.loc 1 103 3 is_stmt 1 view .LVU118
 103:Core/Src/Main/Interrupt.c **** 		TargetAngularV = (float)ang_out;
 393              		.loc 1 103 13 is_stmt 0 view .LVU119
 394 024c 1B4B     		ldr	r3, .L13+76
 395 024e 93ED000A 		vldr.32	s0, [r3]
 396 0252 104B     		ldr	r3, .L13+36
 397 0254 D3ED000A 		vldr.32	s1, [r3]
 398 0258 0020     		movs	r0, #0
 399 025a FFF7FEFF 		bl	PIDControl
 400              	.LVL37:
 401 025e 07EE900A 		vmov	s15, r0	@ int
 402              	.LVL38:
 104:Core/Src/Main/Interrupt.c **** 		//TargetVelocity[BODY] = 0.1*PIDControl( FD_WALL_PID,   Photo[FR]+Photo[FL],4000);
 403              		.loc 1 104 3 is_stmt 1 view .LVU120
 104:Core/Src/Main/Interrupt.c **** 		//TargetVelocity[BODY] = 0.1*PIDControl( FD_WALL_PID,   Photo[FR]+Photo[FL],4000);
 404              		.loc 1 104 20 is_stmt 0 view .LVU121
 405 0262 F8EEE77A 		vcvt.f32.s32	s15, s15
 104:Core/Src/Main/Interrupt.c **** 		//TargetVelocity[BODY] = 0.1*PIDControl( FD_WALL_PID,   Photo[FR]+Photo[FL],4000);
 406              		.loc 1 104 18 view .LVU122
 407 0266 114B     		ldr	r3, .L13+60
 408 0268 C3ED007A 		vstr.32	s15, [r3]
 409 026c 25E7     		b	.L3
 410              	.L14:
 411 026e 00BF     		.align	3
 412              	.L13:
 413 0270 FCA9F1D2 		.word	-755914244
 414 0274 4D62503F 		.word	1062232653
 415 0278 00040040 		.word	1073742848
 416 027c 00000000 		.word	PulseDisplacement
 417 0280 00080040 		.word	1073743872
 418 0284 CD77813F 		.word	1065449421
 419 0288 00000000 		.word	CurrentVelocity
 420 028c 00000000 		.word	.LANCHOR0
 421 0290 00000000 		.word	TotalPulse
 422 0294 00000000 		.word	Angle
 423 0298 00000000 		.word	AngularV
 424 029c 00000000 		.word	Pid
 425 02a0 00000000 		.word	Acceleration
 426 02a4 00000000 		.word	TargetVelocity
 427 02a8 00000000 		.word	AngularAcceleration
 428 02ac 00000000 		.word	TargetAngularV
 429 02b0 9A990942 		.word	1107925402
 430 02b4 00000000 		.word	VelocityLeftOut
 431 02b8 00000000 		.word	VelocityRightOut
 432 02bc 00000000 		.word	TargetAngle
 433 02c0 00000000 		.word	Photo
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 12


 434 02c4 00000000 		.word	PhotoDiff
 435 02c8 00000000 		.word	TargetPhoto
 436 02cc 00806D45 		.word	1164804096
 437              		.cfi_endproc
 438              	.LFE238:
 440              		.global	__aeabi_dadd
 441              		.section	.text.WritingFree_IT,"ax",%progbits
 442              		.align	1
 443              		.syntax unified
 444              		.thumb
 445              		.thumb_func
 447              	WritingFree_IT:
 448              	.LFB239:
 155:Core/Src/Main/Interrupt.c **** static void WritingFree_IT()
 156:Core/Src/Main/Interrupt.c **** {
 449              		.loc 1 156 1 is_stmt 1 view -0
 450              		.cfi_startproc
 451              		@ args = 0, pretend = 0, frame = 0
 452              		@ frame_needed = 0, uses_anonymous_args = 0
 453 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 454              	.LCFI1:
 455              		.cfi_def_cfa_offset 24
 456              		.cfi_offset 3, -24
 457              		.cfi_offset 4, -20
 458              		.cfi_offset 5, -16
 459              		.cfi_offset 6, -12
 460              		.cfi_offset 7, -8
 461              		.cfi_offset 14, -4
 462 0002 2DED028B 		vpush.64	{d8}
 463              	.LCFI2:
 464              		.cfi_def_cfa_offset 32
 465              		.cfi_offset 80, -32
 466              		.cfi_offset 81, -28
 157:Core/Src/Main/Interrupt.c **** 	PulseDisplacement[LEFT] = - (TIM3->CNT - INITIAL_PULSE);
 467              		.loc 1 157 2 view .LVU124
 468              		.loc 1 157 35 is_stmt 0 view .LVU125
 469 0006 6A4A     		ldr	r2, .L17+16
 470 0008 516A     		ldr	r1, [r2, #36]
 471              		.loc 1 157 28 view .LVU126
 472 000a 47F22F53 		movw	r3, #29999
 473 000e 591A     		subs	r1, r3, r1
 474              		.loc 1 157 26 view .LVU127
 475 0010 684C     		ldr	r4, .L17+20
 476 0012 2160     		str	r1, [r4]
 158:Core/Src/Main/Interrupt.c **** 	TIM3->CNT = INITIAL_PULSE;
 477              		.loc 1 158 2 is_stmt 1 view .LVU128
 478              		.loc 1 158 12 is_stmt 0 view .LVU129
 479 0014 5362     		str	r3, [r2, #36]
 159:Core/Src/Main/Interrupt.c **** 	PulseDisplacement[RIGHT] = - (TIM4->CNT - INITIAL_PULSE);
 480              		.loc 1 159 2 is_stmt 1 view .LVU130
 481              		.loc 1 159 36 is_stmt 0 view .LVU131
 482 0016 6848     		ldr	r0, .L17+24
 483 0018 426A     		ldr	r2, [r0, #36]
 484              		.loc 1 159 29 view .LVU132
 485 001a 9A1A     		subs	r2, r3, r2
 486              		.loc 1 159 27 view .LVU133
 487 001c 6260     		str	r2, [r4, #4]
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 13


 160:Core/Src/Main/Interrupt.c **** 	TIM4->CNT = INITIAL_PULSE;
 488              		.loc 1 160 2 is_stmt 1 view .LVU134
 489              		.loc 1 160 12 is_stmt 0 view .LVU135
 490 001e 4362     		str	r3, [r0, #36]
 161:Core/Src/Main/Interrupt.c **** 
 162:Core/Src/Main/Interrupt.c **** 	CurrentVelocity[LEFT] =  (float)PulseDisplacement[LEFT] * convert_to_velocity;
 491              		.loc 1 162 2 is_stmt 1 view .LVU136
 492              		.loc 1 162 27 is_stmt 0 view .LVU137
 493 0020 07EE901A 		vmov	s15, r1	@ int
 494 0024 B8EEE77A 		vcvt.f32.s32	s14, s15
 495              		.loc 1 162 58 view .LVU138
 496 0028 DFED646A 		vldr.32	s13, .L17+28
 497 002c 27EE267A 		vmul.f32	s14, s14, s13
 498              		.loc 1 162 24 view .LVU139
 499 0030 634D     		ldr	r5, .L17+32
 500 0032 85ED007A 		vstr.32	s14, [r5]
 163:Core/Src/Main/Interrupt.c **** 	CurrentVelocity[RIGHT] =  (float)PulseDisplacement[RIGHT] * convert_to_velocity;
 501              		.loc 1 163 2 is_stmt 1 view .LVU140
 502              		.loc 1 163 28 is_stmt 0 view .LVU141
 503 0036 07EE902A 		vmov	s15, r2	@ int
 504 003a F8EEE77A 		vcvt.f32.s32	s15, s15
 505              		.loc 1 163 60 view .LVU142
 506 003e 67EEA67A 		vmul.f32	s15, s15, s13
 507              		.loc 1 163 25 view .LVU143
 508 0042 C5ED017A 		vstr.32	s15, [r5, #4]
 164:Core/Src/Main/Interrupt.c **** 	CurrentVelocity[BODY] = (CurrentVelocity[LEFT] + CurrentVelocity[RIGHT] )*0.5f;
 509              		.loc 1 164 2 is_stmt 1 view .LVU144
 510              		.loc 1 164 42 is_stmt 0 view .LVU145
 511 0046 D5ED007A 		vldr.32	s15, [r5]
 512              		.loc 1 164 66 view .LVU146
 513 004a 95ED017A 		vldr.32	s14, [r5, #4]
 514              		.loc 1 164 49 view .LVU147
 515 004e 77EE877A 		vadd.f32	s15, s15, s14
 516              		.loc 1 164 75 view .LVU148
 517 0052 F6EE008A 		vmov.f32	s17, #5.0e-1
 518 0056 67EEA87A 		vmul.f32	s15, s15, s17
 519              		.loc 1 164 24 view .LVU149
 520 005a C5ED027A 		vstr.32	s15, [r5, #8]
 165:Core/Src/Main/Interrupt.c **** #if 0
 166:Core/Src/Main/Interrupt.c **** 	static int count=0;
 167:Core/Src/Main/Interrupt.c **** 
 168:Core/Src/Main/Interrupt.c **** 	if(count < 2000)
 169:Core/Src/Main/Interrupt.c **** 	{
 170:Core/Src/Main/Interrupt.c **** 		data[count] = CurrentVelocity[LEFT];
 171:Core/Src/Main/Interrupt.c **** 	}
 172:Core/Src/Main/Interrupt.c **** 	count ++;
 173:Core/Src/Main/Interrupt.c **** #endif
 174:Core/Src/Main/Interrupt.c **** 	//ç§»å‹•é‡ mm/msã‚’ç©ç®—
 175:Core/Src/Main/Interrupt.c **** 	TotalPulse[LEFT] += PulseDisplacement[LEFT];
 521              		.loc 1 175 2 is_stmt 1 view .LVU150
 522              		.loc 1 175 19 is_stmt 0 view .LVU151
 523 005e 594B     		ldr	r3, .L17+36
 524 0060 1868     		ldr	r0, [r3]
 525 0062 0144     		add	r1, r1, r0
 526 0064 1960     		str	r1, [r3]
 176:Core/Src/Main/Interrupt.c **** 	TotalPulse[RIGHT] += PulseDisplacement[RIGHT];
 527              		.loc 1 176 2 is_stmt 1 view .LVU152
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 14


 528              		.loc 1 176 20 is_stmt 0 view .LVU153
 529 0066 5968     		ldr	r1, [r3, #4]
 530 0068 0A44     		add	r2, r2, r1
 531 006a 5A60     		str	r2, [r3, #4]
 177:Core/Src/Main/Interrupt.c **** 	TotalPulse[BODY] = TotalPulse[LEFT]+TotalPulse[RIGHT];
 532              		.loc 1 177 2 is_stmt 1 view .LVU154
 533              		.loc 1 177 31 is_stmt 0 view .LVU155
 534 006c 1A68     		ldr	r2, [r3]
 535              		.loc 1 177 48 view .LVU156
 536 006e 5968     		ldr	r1, [r3, #4]
 537              		.loc 1 177 37 view .LVU157
 538 0070 0A44     		add	r2, r2, r1
 539              		.loc 1 177 19 view .LVU158
 540 0072 9A60     		str	r2, [r3, #8]
 178:Core/Src/Main/Interrupt.c **** 
 179:Core/Src/Main/Interrupt.c **** #if 1
 180:Core/Src/Main/Interrupt.c **** 
 181:Core/Src/Main/Interrupt.c **** 	static float zg_last=0;
 541              		.loc 1 181 2 is_stmt 1 view .LVU159
 182:Core/Src/Main/Interrupt.c **** 	float zg_law;
 542              		.loc 1 182 2 view .LVU160
 183:Core/Src/Main/Interrupt.c **** 	//uint8_t zgb,zgf;
 184:Core/Src/Main/Interrupt.c **** 	ZGyro = ReadIMU(0x37, 0x38);
 543              		.loc 1 184 2 view .LVU161
 544              		.loc 1 184 10 is_stmt 0 view .LVU162
 545 0074 3821     		movs	r1, #56
 546 0076 3720     		movs	r0, #55
 547 0078 FFF7FEFF 		bl	ReadIMU
 548              	.LVL39:
 549              		.loc 1 184 8 view .LVU163
 550 007c 524B     		ldr	r3, .L17+40
 551 007e 83ED000A 		vstr.32	s0, [r3]
 185:Core/Src/Main/Interrupt.c ****     zg_law =  ( ZGyro - zg_offset )*convert_to_imu_angv;//16.4 * 180;//rad/s or rad/0.001s
 552              		.loc 1 185 5 is_stmt 1 view .LVU164
 553              		.loc 1 185 23 is_stmt 0 view .LVU165
 554 0082 93ED008A 		vldr.32	s16, [r3]
 555 0086 514B     		ldr	r3, .L17+44
 556 0088 D3ED007A 		vldr.32	s15, [r3]
 557 008c 38EE678A 		vsub.f32	s16, s16, s15
 558              		.loc 1 185 36 view .LVU166
 559 0090 4F4B     		ldr	r3, .L17+48
 560 0092 D3ED007A 		vldr.32	s15, [r3]
 561              		.loc 1 185 12 view .LVU167
 562 0096 28EE278A 		vmul.f32	s16, s16, s15
 563              	.LVL40:
 186:Core/Src/Main/Interrupt.c ****     AngularV = -((0.01*zg_law) + (0.99)* (zg_last));
 564              		.loc 1 186 5 is_stmt 1 view .LVU168
 565              		.loc 1 186 23 is_stmt 0 view .LVU169
 566 009a 18EE100A 		vmov	r0, s16
 567 009e FFF7FEFF 		bl	__aeabi_f2d
 568              	.LVL41:
 569 00a2 3FA3     		adr	r3, .L17
 570 00a4 D3E90023 		ldrd	r2, [r3]
 571 00a8 FFF7FEFF 		bl	__aeabi_dmul
 572              	.LVL42:
 573 00ac 0646     		mov	r6, r0
 574 00ae 0F46     		mov	r7, r1
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 15


 575              		.loc 1 186 40 view .LVU170
 576 00b0 484C     		ldr	r4, .L17+52
 577 00b2 2068     		ldr	r0, [r4]	@ float
 578 00b4 FFF7FEFF 		bl	__aeabi_f2d
 579              	.LVL43:
 580 00b8 3BA3     		adr	r3, .L17+8
 581 00ba D3E90023 		ldrd	r2, [r3]
 582 00be FFF7FEFF 		bl	__aeabi_dmul
 583              	.LVL44:
 584 00c2 0246     		mov	r2, r0
 585 00c4 0B46     		mov	r3, r1
 586              		.loc 1 186 32 view .LVU171
 587 00c6 3046     		mov	r0, r6
 588 00c8 3946     		mov	r1, r7
 589 00ca FFF7FEFF 		bl	__aeabi_dadd
 590              	.LVL45:
 591 00ce FFF7FEFF 		bl	__aeabi_d2f
 592              	.LVL46:
 593              		.loc 1 186 14 view .LVU172
 594 00d2 07EE900A 		vmov	s15, r0
 595 00d6 F1EE677A 		vneg.f32	s15, s15
 596 00da 3F4B     		ldr	r3, .L17+56
 597 00dc C3ED007A 		vstr.32	s15, [r3]
 187:Core/Src/Main/Interrupt.c ****     zg_last = zg_law;
 598              		.loc 1 187 5 is_stmt 1 view .LVU173
 599              		.loc 1 187 13 is_stmt 0 view .LVU174
 600 00e0 84ED008A 		vstr.32	s16, [r4]
 188:Core/Src/Main/Interrupt.c **** 	Angle += AngularV * T1;
 601              		.loc 1 188 2 is_stmt 1 view .LVU175
 602              		.loc 1 188 20 is_stmt 0 view .LVU176
 603 00e4 D3ED007A 		vldr.32	s15, [r3]
 604 00e8 9FED3C7A 		vldr.32	s14, .L17+60
 605 00ec 27EE877A 		vmul.f32	s14, s15, s14
 606              		.loc 1 188 8 view .LVU177
 607 00f0 3B4B     		ldr	r3, .L17+64
 608 00f2 D3ED007A 		vldr.32	s15, [r3]
 609 00f6 77EE877A 		vadd.f32	s15, s15, s14
 610 00fa C3ED007A 		vstr.32	s15, [r3]
 189:Core/Src/Main/Interrupt.c **** 
 190:Core/Src/Main/Interrupt.c **** #else
 191:Core/Src/Main/Interrupt.c **** 	AngularV = ( CurrentVelocity[LEFT] - CurrentVelocity[RIGHT] ) *convert_to_angularv;
 192:Core/Src/Main/Interrupt.c **** 	Angle += AngularV * T1;
 193:Core/Src/Main/Interrupt.c **** 
 194:Core/Src/Main/Interrupt.c **** #endif
 195:Core/Src/Main/Interrupt.c **** 	AngularAcceleration += AngularLeapsity;
 611              		.loc 1 195 2 is_stmt 1 view .LVU178
 612              		.loc 1 195 22 is_stmt 0 view .LVU179
 613 00fe 394B     		ldr	r3, .L17+68
 614 0100 D3ED007A 		vldr.32	s15, [r3]
 615 0104 384A     		ldr	r2, .L17+72
 616 0106 92ED007A 		vldr.32	s14, [r2]
 617 010a 77EE877A 		vadd.f32	s15, s15, s14
 618 010e C3ED007A 		vstr.32	s15, [r3]
 196:Core/Src/Main/Interrupt.c **** 	TargetVelocity[BODY] += Acceleration;
 619              		.loc 1 196 2 is_stmt 1 view .LVU180
 620 0112 364A     		ldr	r2, .L17+76
 621 0114 92ED007A 		vldr.32	s14, [r2]
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 16


 622              		.loc 1 196 23 is_stmt 0 view .LVU181
 623 0118 354C     		ldr	r4, .L17+80
 624 011a D4ED027A 		vldr.32	s15, [r4, #8]
 625 011e 77EE877A 		vadd.f32	s15, s15, s14
 626 0122 C4ED027A 		vstr.32	s15, [r4, #8]
 197:Core/Src/Main/Interrupt.c **** 	TargetAngularV += AngularAcceleration;
 627              		.loc 1 197 2 is_stmt 1 view .LVU182
 628 0126 93ED007A 		vldr.32	s14, [r3]
 629              		.loc 1 197 17 is_stmt 0 view .LVU183
 630 012a 324B     		ldr	r3, .L17+84
 631 012c D3ED007A 		vldr.32	s15, [r3]
 632 0130 77EE877A 		vadd.f32	s15, s15, s14
 633 0134 C3ED007A 		vstr.32	s15, [r3]
 198:Core/Src/Main/Interrupt.c **** 
 199:Core/Src/Main/Interrupt.c **** 	TargetVelocity[RIGHT] = ( TargetVelocity[BODY] - TargetAngularV * TREAD_WIDTH * 0.5f );
 634              		.loc 1 199 2 is_stmt 1 view .LVU184
 635              		.loc 1 199 42 is_stmt 0 view .LVU185
 636 0138 D4ED026A 		vldr.32	s13, [r4, #8]
 637              		.loc 1 199 66 view .LVU186
 638 013c 93ED007A 		vldr.32	s14, [r3]
 639 0140 9FED2D6A 		vldr.32	s12, .L17+88
 640 0144 27EE067A 		vmul.f32	s14, s14, s12
 641              		.loc 1 199 80 view .LVU187
 642 0148 27EE287A 		vmul.f32	s14, s14, s17
 643              		.loc 1 199 49 view .LVU188
 644 014c 36EEC77A 		vsub.f32	s14, s13, s14
 645              		.loc 1 199 24 view .LVU189
 646 0150 84ED017A 		vstr.32	s14, [r4, #4]
 200:Core/Src/Main/Interrupt.c **** 	TargetVelocity[LEFT] = ( TargetAngularV *TREAD_WIDTH ) + TargetVelocity[RIGHT];
 647              		.loc 1 200 2 is_stmt 1 view .LVU190
 648              		.loc 1 200 42 is_stmt 0 view .LVU191
 649 0154 D3ED007A 		vldr.32	s15, [r3]
 650 0158 67EE867A 		vmul.f32	s15, s15, s12
 651              		.loc 1 200 73 view .LVU192
 652 015c 94ED017A 		vldr.32	s14, [r4, #4]
 653              		.loc 1 200 57 view .LVU193
 654 0160 77EE877A 		vadd.f32	s15, s15, s14
 655              		.loc 1 200 23 view .LVU194
 656 0164 C4ED007A 		vstr.32	s15, [r4]
 201:Core/Src/Main/Interrupt.c **** 
 202:Core/Src/Main/Interrupt.c **** 	VelocityLeftOut = PIDControl( L_VELO_PID, TargetVelocity[LEFT], CurrentVelocity[LEFT]);
 657              		.loc 1 202 2 is_stmt 1 view .LVU195
 658              		.loc 1 202 20 is_stmt 0 view .LVU196
 659 0168 94ED000A 		vldr.32	s0, [r4]
 660 016c D5ED000A 		vldr.32	s1, [r5]
 661 0170 0420     		movs	r0, #4
 662 0172 FFF7FEFF 		bl	PIDControl
 663              	.LVL47:
 664              		.loc 1 202 18 view .LVU197
 665 0176 214E     		ldr	r6, .L17+92
 666 0178 3060     		str	r0, [r6]
 203:Core/Src/Main/Interrupt.c **** 	VelocityRightOut = PIDControl( R_VELO_PID, TargetVelocity[RIGHT], CurrentVelocity[RIGHT]);
 667              		.loc 1 203 2 is_stmt 1 view .LVU198
 668              		.loc 1 203 21 is_stmt 0 view .LVU199
 669 017a 94ED010A 		vldr.32	s0, [r4, #4]
 670 017e D5ED010A 		vldr.32	s1, [r5, #4]
 671 0182 0520     		movs	r0, #5
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 17


 672 0184 FFF7FEFF 		bl	PIDControl
 673              	.LVL48:
 674 0188 0146     		mov	r1, r0
 675              		.loc 1 203 19 view .LVU200
 676 018a 1D4B     		ldr	r3, .L17+96
 677 018c 1860     		str	r0, [r3]
 204:Core/Src/Main/Interrupt.c **** 
 205:Core/Src/Main/Interrupt.c **** 	Motor_Switch( VelocityLeftOut, VelocityRightOut );
 678              		.loc 1 205 2 is_stmt 1 view .LVU201
 679 018e 3068     		ldr	r0, [r6]
 680 0190 FFF7FEFF 		bl	Motor_Switch
 681              	.LVL49:
 206:Core/Src/Main/Interrupt.c **** }
 682              		.loc 1 206 1 is_stmt 0 view .LVU202
 683 0194 BDEC028B 		vldm	sp!, {d8}
 684              	.LCFI3:
 685              		.cfi_restore 80
 686              		.cfi_restore 81
 687              		.cfi_def_cfa_offset 24
 688              	.LVL50:
 689              		.loc 1 206 1 view .LVU203
 690 0198 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 691              	.L18:
 692 019a 00BFAFF3 		.align	3
 692      0080
 693              	.L17:
 694 01a0 7B14AE47 		.word	1202590843
 695 01a4 E17A843F 		.word	1065646817
 696 01a8 AE47E17A 		.word	2061584302
 697 01ac 14AEEF3F 		.word	1072672276
 698 01b0 00040040 		.word	1073742848
 699 01b4 00000000 		.word	PulseDisplacement
 700 01b8 00080040 		.word	1073743872
 701 01bc CD77813F 		.word	1065449421
 702 01c0 00000000 		.word	CurrentVelocity
 703 01c4 00000000 		.word	TotalPulse
 704 01c8 00000000 		.word	ZGyro
 705 01cc 00000000 		.word	zg_offset
 706 01d0 00000000 		.word	convert_to_imu_angv
 707 01d4 00000000 		.word	.LANCHOR1
 708 01d8 00000000 		.word	AngularV
 709 01dc 6F12833A 		.word	981668463
 710 01e0 00000000 		.word	Angle
 711 01e4 00000000 		.word	AngularAcceleration
 712 01e8 00000000 		.word	AngularLeapsity
 713 01ec 00000000 		.word	Acceleration
 714 01f0 00000000 		.word	TargetVelocity
 715 01f4 00000000 		.word	TargetAngularV
 716 01f8 9A990942 		.word	1107925402
 717 01fc 00000000 		.word	VelocityLeftOut
 718 0200 00000000 		.word	VelocityRightOut
 719              		.cfi_endproc
 720              	.LFE239:
 722              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 723              		.align	1
 724              		.global	HAL_TIM_PeriodElapsedCallback
 725              		.syntax unified
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 18


 726              		.thumb
 727              		.thumb_func
 729              	HAL_TIM_PeriodElapsedCallback:
 730              	.LVL51:
 731              	.LFB240:
 207:Core/Src/Main/Interrupt.c **** 
 208:Core/Src/Main/Interrupt.c **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim)
 209:Core/Src/Main/Interrupt.c **** {
 732              		.loc 1 209 1 is_stmt 1 view -0
 733              		.cfi_startproc
 734              		@ args = 0, pretend = 0, frame = 16
 735              		@ frame_needed = 0, uses_anonymous_args = 0
 736              		.loc 1 209 1 is_stmt 0 view .LVU205
 737 0000 70B5     		push	{r4, r5, r6, lr}
 738              	.LCFI4:
 739              		.cfi_def_cfa_offset 16
 740              		.cfi_offset 4, -16
 741              		.cfi_offset 5, -12
 742              		.cfi_offset 6, -8
 743              		.cfi_offset 14, -4
 744 0002 84B0     		sub	sp, sp, #16
 745              	.LCFI5:
 746              		.cfi_def_cfa_offset 32
 747 0004 0446     		mov	r4, r0
 210:Core/Src/Main/Interrupt.c **** 	if( htim == &htim1)
 748              		.loc 1 210 2 is_stmt 1 view .LVU206
 749              		.loc 1 210 4 is_stmt 0 view .LVU207
 750 0006 2B4B     		ldr	r3, .L30
 751 0008 9842     		cmp	r0, r3
 752 000a 04D0     		beq	.L27
 753              	.LVL52:
 754              	.L20:
 211:Core/Src/Main/Interrupt.c **** 	{
 212:Core/Src/Main/Interrupt.c **** 
 213:Core/Src/Main/Interrupt.c **** 		switch(IT_mode){
 214:Core/Src/Main/Interrupt.c **** 		case EXPLORE:
 215:Core/Src/Main/Interrupt.c **** 			Explore_IT();
 216:Core/Src/Main/Interrupt.c **** 			break;
 217:Core/Src/Main/Interrupt.c **** 		case WRITINGFREE:
 218:Core/Src/Main/Interrupt.c **** 			WritingFree_IT();
 219:Core/Src/Main/Interrupt.c **** 			break;
 220:Core/Src/Main/Interrupt.c **** 		case IMU_TEST:
 221:Core/Src/Main/Interrupt.c **** 
 222:Core/Src/Main/Interrupt.c **** 			if(timer1 < 5000)
 223:Core/Src/Main/Interrupt.c **** 			{
 224:Core/Src/Main/Interrupt.c **** 
 225:Core/Src/Main/Interrupt.c **** 				Update_IMU(&AngularV, &Angle);
 226:Core/Src/Main/Interrupt.c **** //				debugVL[timer1] = Angle;
 227:Core/Src/Main/Interrupt.c **** 				timer1 += t;
 228:Core/Src/Main/Interrupt.c **** 			}
 229:Core/Src/Main/Interrupt.c **** 			else t = 0;
 230:Core/Src/Main/Interrupt.c **** 			break;
 231:Core/Src/Main/Interrupt.c **** 		default :
 232:Core/Src/Main/Interrupt.c **** 			break;
 233:Core/Src/Main/Interrupt.c **** 		}
 234:Core/Src/Main/Interrupt.c **** 	}
 235:Core/Src/Main/Interrupt.c **** 
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 19


 236:Core/Src/Main/Interrupt.c **** 	if( htim == &htim8)
 755              		.loc 1 236 2 is_stmt 1 view .LVU208
 756              		.loc 1 236 4 is_stmt 0 view .LVU209
 757 000c 2A4B     		ldr	r3, .L30+4
 758 000e 9C42     		cmp	r4, r3
 759 0010 24D0     		beq	.L28
 760              	.LVL53:
 761              	.L19:
 237:Core/Src/Main/Interrupt.c **** 	{
 238:Core/Src/Main/Interrupt.c **** 		//timer8 += t;
 239:Core/Src/Main/Interrupt.c **** 
 240:Core/Src/Main/Interrupt.c **** 		//å£ã‚»ãƒ³ã‚µãƒ‡ãƒ¼ã‚¿ã®æ›´æ–°
 241:Core/Src/Main/Interrupt.c **** 		Photo[FL] = GetWallDataAverage(10, adc1[0], FL);	//adc1_IN10
 242:Core/Src/Main/Interrupt.c **** 		Photo[SIDE_R] = GetWallDataAverage(10, adc1[1], SIDE_R);	//adc1_IN14
 243:Core/Src/Main/Interrupt.c **** 		Photo[SL] = GetWallDataAverage(10, adc2[0], SL);	//adc2_IN11
 244:Core/Src/Main/Interrupt.c **** 		Photo[FR] = GetWallDataAverage(10, adc2[1], FR);	//adc2_IN15
 245:Core/Src/Main/Interrupt.c **** 		#if 1
 246:Core/Src/Main/Interrupt.c **** 			uint32_t sample[4]={
 247:Core/Src/Main/Interrupt.c **** 				adc2[0],
 248:Core/Src/Main/Interrupt.c **** 				adc1[0],
 249:Core/Src/Main/Interrupt.c **** 				adc2[1],
 250:Core/Src/Main/Interrupt.c **** 				adc1[1]
 251:Core/Src/Main/Interrupt.c **** 			};
 252:Core/Src/Main/Interrupt.c **** 			getPhotoSampleValue_uint32(&sample[0]);
 253:Core/Src/Main/Interrupt.c **** 		#else
 254:Core/Src/Main/Interrupt.c **** 			getPhotoSampleValue_float(&Photo[0]);
 255:Core/Src/Main/Interrupt.c **** 		#endif
 256:Core/Src/Main/Interrupt.c **** 	}
 257:Core/Src/Main/Interrupt.c **** }
 762              		.loc 1 257 1 view .LVU210
 763 0012 04B0     		add	sp, sp, #16
 764              	.LCFI6:
 765              		.cfi_remember_state
 766              		.cfi_def_cfa_offset 16
 767              		@ sp needed
 768 0014 70BD     		pop	{r4, r5, r6, pc}
 769              	.LVL54:
 770              	.L27:
 771              	.LCFI7:
 772              		.cfi_restore_state
 213:Core/Src/Main/Interrupt.c **** 		case EXPLORE:
 773              		.loc 1 213 3 is_stmt 1 view .LVU211
 774 0016 294B     		ldr	r3, .L30+8
 775 0018 1B68     		ldr	r3, [r3]
 776 001a 062B     		cmp	r3, #6
 777 001c 0DD0     		beq	.L21
 778 001e 072B     		cmp	r3, #7
 779 0020 0ED0     		beq	.L22
 780 0022 052B     		cmp	r3, #5
 781 0024 F2D1     		bne	.L20
 222:Core/Src/Main/Interrupt.c **** 			{
 782              		.loc 1 222 4 view .LVU212
 222:Core/Src/Main/Interrupt.c **** 			{
 783              		.loc 1 222 14 is_stmt 0 view .LVU213
 784 0026 264B     		ldr	r3, .L30+12
 785 0028 1A68     		ldr	r2, [r3]
 222:Core/Src/Main/Interrupt.c **** 			{
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 20


 786              		.loc 1 222 6 view .LVU214
 787 002a 41F28733 		movw	r3, #4999
 788 002e 9A42     		cmp	r2, r3
 789 0030 09DD     		ble	.L29
 229:Core/Src/Main/Interrupt.c **** 			break;
 790              		.loc 1 229 9 is_stmt 1 view .LVU215
 229:Core/Src/Main/Interrupt.c **** 			break;
 791              		.loc 1 229 11 is_stmt 0 view .LVU216
 792 0032 244B     		ldr	r3, .L30+16
 793 0034 0022     		movs	r2, #0
 794 0036 1A60     		str	r2, [r3]
 795 0038 E8E7     		b	.L20
 796              	.L21:
 215:Core/Src/Main/Interrupt.c **** 			break;
 797              		.loc 1 215 4 is_stmt 1 view .LVU217
 798 003a FFF7FEFF 		bl	Explore_IT
 799              	.LVL55:
 216:Core/Src/Main/Interrupt.c **** 		case WRITINGFREE:
 800              		.loc 1 216 4 view .LVU218
 801 003e E5E7     		b	.L20
 802              	.LVL56:
 803              	.L22:
 218:Core/Src/Main/Interrupt.c **** 			break;
 804              		.loc 1 218 4 view .LVU219
 805 0040 FFF7FEFF 		bl	WritingFree_IT
 806              	.LVL57:
 219:Core/Src/Main/Interrupt.c **** 		case IMU_TEST:
 807              		.loc 1 219 4 view .LVU220
 808 0044 E2E7     		b	.L20
 809              	.LVL58:
 810              	.L29:
 225:Core/Src/Main/Interrupt.c **** //				debugVL[timer1] = Angle;
 811              		.loc 1 225 5 view .LVU221
 812 0046 2049     		ldr	r1, .L30+20
 813 0048 2048     		ldr	r0, .L30+24
 814              	.LVL59:
 225:Core/Src/Main/Interrupt.c **** //				debugVL[timer1] = Angle;
 815              		.loc 1 225 5 is_stmt 0 view .LVU222
 816 004a FFF7FEFF 		bl	Update_IMU
 817              	.LVL60:
 227:Core/Src/Main/Interrupt.c **** 			}
 818              		.loc 1 227 5 is_stmt 1 view .LVU223
 227:Core/Src/Main/Interrupt.c **** 			}
 819              		.loc 1 227 12 is_stmt 0 view .LVU224
 820 004e 1C4A     		ldr	r2, .L30+12
 821 0050 1368     		ldr	r3, [r2]
 822 0052 1C49     		ldr	r1, .L30+16
 823 0054 0968     		ldr	r1, [r1]
 824 0056 0B44     		add	r3, r3, r1
 825 0058 1360     		str	r3, [r2]
 826 005a D7E7     		b	.L20
 827              	.L28:
 828              	.LBB2:
 241:Core/Src/Main/Interrupt.c **** 		Photo[SIDE_R] = GetWallDataAverage(10, adc1[1], SIDE_R);	//adc1_IN14
 829              		.loc 1 241 3 is_stmt 1 view .LVU225
 241:Core/Src/Main/Interrupt.c **** 		Photo[SIDE_R] = GetWallDataAverage(10, adc1[1], SIDE_R);	//adc1_IN14
 830              		.loc 1 241 42 is_stmt 0 view .LVU226
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 21


 831 005c 1C4C     		ldr	r4, .L30+28
 832              	.LVL61:
 241:Core/Src/Main/Interrupt.c **** 		Photo[SIDE_R] = GetWallDataAverage(10, adc1[1], SIDE_R);	//adc1_IN14
 833              		.loc 1 241 15 view .LVU227
 834 005e 0022     		movs	r2, #0
 835 0060 2168     		ldr	r1, [r4]
 836 0062 0A20     		movs	r0, #10
 837 0064 FFF7FEFF 		bl	GetWallDataAverage
 838              	.LVL62:
 241:Core/Src/Main/Interrupt.c **** 		Photo[SIDE_R] = GetWallDataAverage(10, adc1[1], SIDE_R);	//adc1_IN14
 839              		.loc 1 241 13 view .LVU228
 840 0068 1A4E     		ldr	r6, .L30+32
 841 006a 86ED000A 		vstr.32	s0, [r6]
 242:Core/Src/Main/Interrupt.c **** 		Photo[SL] = GetWallDataAverage(10, adc2[0], SL);	//adc2_IN11
 842              		.loc 1 242 3 is_stmt 1 view .LVU229
 242:Core/Src/Main/Interrupt.c **** 		Photo[SL] = GetWallDataAverage(10, adc2[0], SL);	//adc2_IN11
 843              		.loc 1 242 19 is_stmt 0 view .LVU230
 844 006e 0122     		movs	r2, #1
 845 0070 6168     		ldr	r1, [r4, #4]
 846 0072 0A20     		movs	r0, #10
 847 0074 FFF7FEFF 		bl	GetWallDataAverage
 848              	.LVL63:
 242:Core/Src/Main/Interrupt.c **** 		Photo[SL] = GetWallDataAverage(10, adc2[0], SL);	//adc2_IN11
 849              		.loc 1 242 17 view .LVU231
 850 0078 86ED010A 		vstr.32	s0, [r6, #4]
 243:Core/Src/Main/Interrupt.c **** 		Photo[FR] = GetWallDataAverage(10, adc2[1], FR);	//adc2_IN15
 851              		.loc 1 243 3 is_stmt 1 view .LVU232
 243:Core/Src/Main/Interrupt.c **** 		Photo[FR] = GetWallDataAverage(10, adc2[1], FR);	//adc2_IN15
 852              		.loc 1 243 42 is_stmt 0 view .LVU233
 853 007c 164D     		ldr	r5, .L30+36
 243:Core/Src/Main/Interrupt.c **** 		Photo[FR] = GetWallDataAverage(10, adc2[1], FR);	//adc2_IN15
 854              		.loc 1 243 15 view .LVU234
 855 007e 0222     		movs	r2, #2
 856 0080 2968     		ldr	r1, [r5]
 857 0082 0A20     		movs	r0, #10
 858 0084 FFF7FEFF 		bl	GetWallDataAverage
 859              	.LVL64:
 243:Core/Src/Main/Interrupt.c **** 		Photo[FR] = GetWallDataAverage(10, adc2[1], FR);	//adc2_IN15
 860              		.loc 1 243 13 view .LVU235
 861 0088 86ED020A 		vstr.32	s0, [r6, #8]
 244:Core/Src/Main/Interrupt.c **** 		#if 1
 862              		.loc 1 244 3 is_stmt 1 view .LVU236
 244:Core/Src/Main/Interrupt.c **** 		#if 1
 863              		.loc 1 244 15 is_stmt 0 view .LVU237
 864 008c 0322     		movs	r2, #3
 865 008e 6968     		ldr	r1, [r5, #4]
 866 0090 0A20     		movs	r0, #10
 867 0092 FFF7FEFF 		bl	GetWallDataAverage
 868              	.LVL65:
 244:Core/Src/Main/Interrupt.c **** 		#if 1
 869              		.loc 1 244 13 view .LVU238
 870 0096 86ED030A 		vstr.32	s0, [r6, #12]
 246:Core/Src/Main/Interrupt.c **** 				adc2[0],
 871              		.loc 1 246 4 is_stmt 1 view .LVU239
 247:Core/Src/Main/Interrupt.c **** 				adc1[0],
 872              		.loc 1 247 9 is_stmt 0 view .LVU240
 873 009a 2B68     		ldr	r3, [r5]
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 22


 246:Core/Src/Main/Interrupt.c **** 				adc2[0],
 874              		.loc 1 246 13 view .LVU241
 875 009c 0093     		str	r3, [sp]
 248:Core/Src/Main/Interrupt.c **** 				adc2[1],
 876              		.loc 1 248 9 view .LVU242
 877 009e 2368     		ldr	r3, [r4]
 246:Core/Src/Main/Interrupt.c **** 				adc2[0],
 878              		.loc 1 246 13 view .LVU243
 879 00a0 0193     		str	r3, [sp, #4]
 249:Core/Src/Main/Interrupt.c **** 				adc1[1]
 880              		.loc 1 249 9 view .LVU244
 881 00a2 6B68     		ldr	r3, [r5, #4]
 246:Core/Src/Main/Interrupt.c **** 				adc2[0],
 882              		.loc 1 246 13 view .LVU245
 883 00a4 0293     		str	r3, [sp, #8]
 250:Core/Src/Main/Interrupt.c **** 			};
 884              		.loc 1 250 9 view .LVU246
 885 00a6 6368     		ldr	r3, [r4, #4]
 246:Core/Src/Main/Interrupt.c **** 				adc2[0],
 886              		.loc 1 246 13 view .LVU247
 887 00a8 0393     		str	r3, [sp, #12]
 252:Core/Src/Main/Interrupt.c **** 		#else
 888              		.loc 1 252 4 is_stmt 1 view .LVU248
 889 00aa 6846     		mov	r0, sp
 890 00ac FFF7FEFF 		bl	getPhotoSampleValue_uint32
 891              	.LVL66:
 892              	.LBE2:
 893              		.loc 1 257 1 is_stmt 0 view .LVU249
 894 00b0 AFE7     		b	.L19
 895              	.L31:
 896 00b2 00BF     		.align	2
 897              	.L30:
 898 00b4 00000000 		.word	htim1
 899 00b8 00000000 		.word	htim8
 900 00bc 00000000 		.word	.LANCHOR2
 901 00c0 00000000 		.word	.LANCHOR3
 902 00c4 00000000 		.word	.LANCHOR4
 903 00c8 00000000 		.word	Angle
 904 00cc 00000000 		.word	AngularV
 905 00d0 00000000 		.word	adc1
 906 00d4 00000000 		.word	Photo
 907 00d8 00000000 		.word	adc2
 908              		.cfi_endproc
 909              	.LFE240:
 911              		.global	log_velocity
 912              		.global	convert_to_imu_yaccel
 913              		.global	convert_to_angularv
 914              		.global	convert_to_velocity
 915              		.global	dbc
 916              		.global	debugVR
 917              		.global	debugVL
 918              		.global	velodebug_flag
 919              		.global	IT_mode
 920              		.global	t
 921              		.global	timer8
 922              		.global	timer1
 923              		.section	.bss.IT_mode,"aw",%nobits
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 23


 924              		.align	2
 925              		.set	.LANCHOR2,. + 0
 928              	IT_mode:
 929 0000 00000000 		.space	4
 930              		.section	.bss.dbc,"aw",%nobits
 931              		.align	2
 934              	dbc:
 935 0000 00000000 		.space	4
 936              		.section	.bss.debugVL,"aw",%nobits
 937              		.align	2
 940              	debugVL:
 941 0000 00000000 		.space	8000
 941      00000000 
 941      00000000 
 941      00000000 
 941      00000000 
 942              		.section	.bss.debugVR,"aw",%nobits
 943              		.align	2
 946              	debugVR:
 947 0000 00000000 		.space	8000
 947      00000000 
 947      00000000 
 947      00000000 
 947      00000000 
 948              		.section	.bss.log_velocity,"aw",%nobits
 949              		.align	2
 950              		.set	.LANCHOR0,. + 0
 953              	log_velocity:
 954 0000 00000000 		.space	16
 954      00000000 
 954      00000000 
 954      00000000 
 955              		.section	.bss.t,"aw",%nobits
 956              		.align	2
 957              		.set	.LANCHOR4,. + 0
 960              	t:
 961 0000 00000000 		.space	4
 962              		.section	.bss.timer1,"aw",%nobits
 963              		.align	2
 964              		.set	.LANCHOR3,. + 0
 967              	timer1:
 968 0000 00000000 		.space	4
 969              		.section	.bss.timer8,"aw",%nobits
 970              		.align	2
 973              	timer8:
 974 0000 00000000 		.space	4
 975              		.section	.bss.velodebug_flag,"aw",%nobits
 976              		.align	2
 979              	velodebug_flag:
 980 0000 00000000 		.space	4
 981              		.section	.bss.zg_last.0,"aw",%nobits
 982              		.align	2
 983              		.set	.LANCHOR1,. + 0
 986              	zg_last.0:
 987 0000 00000000 		.space	4
 988              		.section	.rodata.convert_to_angularv,"a"
 989              		.align	2
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 24


 992              	convert_to_angularv:
 993 0000 B823EE3C 		.word	1022239672
 994              		.section	.rodata.convert_to_imu_yaccel,"a"
 995              		.align	2
 998              	convert_to_imu_yaccel:
 999 0000 B02F9940 		.word	1083781040
 1000              		.section	.rodata.convert_to_velocity,"a"
 1001              		.align	2
 1004              	convert_to_velocity:
 1005 0000 CD77813F 		.word	1065449421
 1006              		.text
 1007              	.Letext0:
 1008              		.file 2 "c:\\tools\\gcc-arm-none-eabi-10_2021.10\\arm-none-eabi\\include\\machine\\_default_types.
 1009              		.file 3 "c:\\tools\\gcc-arm-none-eabi-10_2021.10\\arm-none-eabi\\include\\sys\\_stdint.h"
 1010              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 1011              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1012              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 1013              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 1014              		.file 8 "Core/Inc/Tools/Sampling.h"
 1015              		.file 9 "Core/Inc/Main/Interrupt.h"
 1016              		.file 10 "Core/Inc/Main/MicroMouse.h"
 1017              		.file 11 "Core/Inc/Tools/PID_Control.h"
 1018              		.file 12 "Core/Inc/HardWare/mouse_ADC.h"
 1019              		.file 13 "Core/Inc/HardWare/ICM_20648.h"
 1020              		.file 14 "Core/Inc/Tools/Convert.h"
 1021              		.file 15 "Core/Inc/HardWare/Motor_Driver.h"
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 25


DEFINED SYMBOLS
                            *ABS*:00000000 Interrupt.c
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:23     .text.Explore_IT:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:28     .text.Explore_IT:00000000 Explore_IT
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:413    .text.Explore_IT:00000270 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:442    .text.WritingFree_IT:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:447    .text.WritingFree_IT:00000000 WritingFree_IT
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:694    .text.WritingFree_IT:000001a0 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:723    .text.HAL_TIM_PeriodElapsedCallback:00000000 $t
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:729    .text.HAL_TIM_PeriodElapsedCallback:00000000 HAL_TIM_PeriodElapsedCallback
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:898    .text.HAL_TIM_PeriodElapsedCallback:000000b4 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:953    .bss.log_velocity:00000000 log_velocity
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:998    .rodata.convert_to_imu_yaccel:00000000 convert_to_imu_yaccel
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:992    .rodata.convert_to_angularv:00000000 convert_to_angularv
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:1004   .rodata.convert_to_velocity:00000000 convert_to_velocity
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:934    .bss.dbc:00000000 dbc
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:946    .bss.debugVR:00000000 debugVR
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:940    .bss.debugVL:00000000 debugVL
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:979    .bss.velodebug_flag:00000000 velodebug_flag
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:928    .bss.IT_mode:00000000 IT_mode
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:960    .bss.t:00000000 t
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:973    .bss.timer8:00000000 timer8
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:967    .bss.timer1:00000000 timer1
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:924    .bss.IT_mode:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:931    .bss.dbc:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:937    .bss.debugVL:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:943    .bss.debugVR:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:949    .bss.log_velocity:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:956    .bss.t:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:963    .bss.timer1:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:970    .bss.timer8:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:976    .bss.velodebug_flag:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:982    .bss.zg_last.0:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:986    .bss.zg_last.0:00000000 zg_last.0
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:989    .rodata.convert_to_angularv:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:995    .rodata.convert_to_imu_yaccel:00000000 $d
C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s:1001   .rodata.convert_to_velocity:00000000 $d

UNDEFINED SYMBOLS
__aeabi_f2d
__aeabi_dmul
__aeabi_d2f
getFloatLog
Update_IMU
PIDControl
Motor_Switch
PulseDisplacement
CurrentVelocity
TotalPulse
Angle
AngularV
Pid
Acceleration
TargetVelocity
AngularAcceleration
TargetAngularV
VelocityLeftOut
ARM GAS  C:\Users\leopi\AppData\Local\Temp\ccoyz4uI.s 			page 26


VelocityRightOut
TargetAngle
Photo
PhotoDiff
TargetPhoto
__aeabi_dadd
ReadIMU
ZGyro
zg_offset
convert_to_imu_angv
AngularLeapsity
GetWallDataAverage
getPhotoSampleValue_uint32
htim1
htim8
adc1
adc2
